<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: php | KayaMemo]]></title>
  <link href="http://kayakuguri.github.io/blog/categories/php/atom.xml" rel="self"/>
  <link href="http://kayakuguri.github.io/"/>
  <updated>2015-04-30T10:50:52+09:00</updated>
  <id>http://kayakuguri.github.io/</id>
  <author>
    <name><![CDATA[è±æ½œ]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[[Salesforce]æ‰¿èªç”³è«‹ã®ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’PHPã§å—ã‘å–ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/28/approval-process-outbound-massage/"/>
    <updated>2015-04-28T20:20:01+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/28/approval-process-outbound-massage</id>
    <content type="html"><![CDATA[<p>salesforceã‹ã‚‰ã®ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ã‚’PHPã§å—ã‘å–ã£ã¦ã¿ãŸã€‚</p>

<!-- more -->


<h2>ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¨­å®š</h2>

<p>å‰å›ä½œæˆã—ãŸã‚‚ã®ã®ç”³è«‹æ™‚ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³éƒ¨åˆ†ã«<code>ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</code>ã‚’è¿½åŠ ã€‚<br/>
<img src="/images/2015/04/outbound01.jpg" alt="" /></p>

<p>ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ãŸã€‚<br/>
<img src="/images/2015/04/outbound02.jpg" alt="" /></p>

<p>è¨­å®šå®Œäº†<br/>
<img src="/images/2015/04/outbound03.jpg" alt="" /></p>

<h2>PHPã§å—ã‘å–ã‚‹</h2>

<p>ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯<code>SOAP</code>ã§é€šä¿¡ãŒè¡Œã‚ã‚Œã‚‹ã€‚<br/>
ãªã®ã§ã€XMLã€‚<br/>
ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¢ã‚¯ã‚»ã‚¹ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ãŸã€‚</p>

<pre><code>at=info method=POST path="/liam_dnes.php?id=1" host=shrouded-island-xxxx.herokuapp.com request_id=01b99464-c9dc-4e15-aa19-xxxxxxx fwd="xxx.xxx.78.8" dyno=web.1 connect=1ms service=4ms status=200 bytes=189
</code></pre>

<p>ã©ã†ã‚„ã‚‰POSTã§ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã€‚<br/>
<code>$_POST</code>ã®ã¾ã¾ã§ã¯å–å¾—ã§ããªã‹ã£ãŸã€‚<br/>
ã©ã†ã‚„ã‚‰ç”Ÿã®POSTãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚‰ã—ã„ã€‚</p>

<p>ä»¥ä¸‹ã§å–å¾—ã—ãŸã€‚</p>

<pre><code>$data = file_get_contents( 'php://input' );
</code></pre>

<p>å–å¾—ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªXMLãŒå–å¾—ã§ããŸã€‚</p>

<p>```
&lt;?xml version=&ldquo;1.0&rdquo; encoding=&ldquo;UTF-8&rdquo;?>
&lt;soapenv:Envelope xmlns:soapenv=&ldquo;<a href="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a>&rdquo; xmlns:xsd=&ldquo;<a href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>&rdquo; xmlns:xsi=&ldquo;<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>&rdquo;></p>

<pre><code>&lt;soapenv:Body&gt;
    &lt;notifications xmlns="http://soap.sforce.com/2005/09/outbound"&gt;
        &lt;OrganizationId&gt;00D10000000Zyxxxxx&lt;/OrganizationId&gt;
        &lt;SessionId xsi:nil="true"/&gt;
        &lt;PartnerUrl&gt;https://ap.salesforce.com/services/Soap/u/33.0/00D100000xxxxx&lt;/PartnerUrl&gt;
        &lt;ActionId&gt;04k100000008STGAA2&lt;/ActionId&gt;
        &lt;EnterpriseUrl&gt;https://ap.salesforce.com/services/Soap/c/33.0/00D100000xxxxx&lt;/EnterpriseUrl&gt;
        &lt;Notification&gt;
            &lt;Id&gt;04l1000000xxxxxx&lt;/Id&gt;
            &lt;sObject xsi:type="sf:Opportunity" xmlns:sf="urn:sobject.enterprise.soap.sforce.com"&gt;
                &lt;sf:Id&gt;0061000000cxxxxx&lt;/sf:Id&gt;
                &lt;sf:Name&gt;ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆå•†è«‡&lt;/sf:Name&gt;
                &lt;sf:StageName&gt;Prospecting&lt;/sf:StageName&gt;
                &lt;sf:IsClosed&gt;false&lt;/sf:IsClosed&gt;
            &lt;/sObject&gt;
        &lt;/Notification&gt;
    &lt;/notifications&gt;
&lt;/soapenv:Body&gt;
</code></pre>

<p>&lt;/soapenv:Envelope>
```</p>

<p>ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ã®è¨­å®šã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã€‚</p>

<p>ã“ã“ã‹ã‚‰XMLã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã€åå‰ãªã©è¨­å®šã—ãŸå€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯ä»¥ä¸‹ã€‚</p>

<p>```
&lt;?php</p>

<p>$data = file_get_contents(&lsquo;php://input&rsquo;);
$xml = simplexml_load_string($data);</p>

<p>//ID
$notification = $xml->children(&lsquo;<a href="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a>&rsquo;)&ndash;>Body->children(&lsquo;<a href="http://soap.sforce.com/2005/09/outbound">http://soap.sforce.com/2005/09/outbound</a>&rsquo;)&ndash;>notifications->Notification;
echo $notification->Id;</p>

<p>//ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
$params = $notification->sObject->children(&lsquo;urn:sobject.enterprise.soap.sforce.com&rsquo;);
echo $params->Id;
echo $params->Name;
echo $params->IsClosed;
```</p>

<h2>å‚è€ƒ</h2>

<p><a href="http://php.net/manual/ja/wrappers.php.php#wrappers.php.input">php://input</a><br/>
<a href="http://ivystar.jp/programming/php/what-is-phpinput/">ã€Œphp://inputã€ã¨ã¯ä½•ï¼Ÿï¼POSTã®ç”Ÿãƒ‡ãƒ¼ã‚¿ï¼Ÿ | ã‚¢ã‚¤ãƒ“ãƒ¼ã‚¹ã‚¿ãƒ¼</a><br/>
<a href="https://amigotechnotes.wordpress.com/2013/11/16/parse-xml-with-namespace-by-simplexml-in-php/">Parse XML with namespace by SimpleXML in PHP | Amigo&#039;s Technical Notes</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Laravel5ã‚’postgresqlã§Herokuã«ãƒ‡ãƒ—ãƒ­ã‚¤]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/21/laravel5-on-heroku/"/>
    <updated>2015-04-21T10:59:17+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/21/laravel5-on-heroku</id>
    <content type="html"><![CDATA[<p>Laravel5ã‚’herokuã«å…¥ã‚Œã¦ã¿ã¾ã—ãŸã€‚<br/>
ãƒ–ãƒ©ã‚¦ã‚¶ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã®æ“ä½œã¯ä¸€åˆ‡ãªã—ã§ã€é»’ã„ç”»é¢ã®ã¿ã§ä½œæˆã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<!-- more -->


<h2>mcrypt</h2>

<p>ãƒ­ãƒ¼ã‚«ãƒ«ã«ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ãªã„ã¨æ€’ã‚‰ã‚ŒãŸã®ã§å°å…¥ã€‚<br/>
ã¾ãŸã€PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„å ´åˆã¯ã€<a href="http://kayamemo.mrlittlebig.com/blog/2015/04/15/mac-update-php/">ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå¿…è¦</a>ã€‚</p>

<p>```
$ php -v                                                                                                           [ruby-2.1.2]
PHP 5.6.7 (cli) (built: Mar 22 2015 19:03:55)
Copyright &copy; 1997-2015 The PHP Group
Zend Engine v2.6.0, Copyright &copy; 1998-2015 Zend Technologies</p>

<p>$ brew search mcrypt                                                                                               [ruby-2.1.2]
libtomcrypt    mcrypt         php53-mcrypt   php54-mcrypt   php55-mcrypt   php56-mcrypt</p>

<p>$ brew install php56-mcrypt
&hellip;ç•¥&hellip;
==> Summary
  /usr/local/Cellar/php56-mcrypt/5.6.7: 3 files, 56K, built in 116 seconds
```</p>

<h2>laravelã®å°å…¥</h2>

<p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</p>

<p><code>
$ composer create-project laravel/laravel --prefer-dist laravel-sample-on-heroku
...ç•¥...
$ cd laravel-sample-on-heroku
</code></p>

<p>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ«ãƒ¼ãƒˆã®è¨­å®š</p>

<p><code>
$ touch Procfile
$ echo 'web: vendor/bin/heroku-php-apache2 public' &gt;&gt; Procfile
</code></p>

<p>Gitã‚’ä½œæˆ</p>

<p><code>
$ git init
$ git add .
$ git commit -m 'init laravel'
</code></p>

<p>herokuã‚¢ãƒ—ãƒªã®ä½œæˆ</p>

<p><code>
$ heroku create laravel-sample-on-heroku
Creating laravel-sample-on-heroku... done, stack is cedar-14
https://laravel-sample-on-heroku.herokuapp.com/ | https://git.heroku.com/laravel-sample-on-heroku.git
Git remote heroku added
</code></p>

<p>ã“ã®ã¾ã¾ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ã€<code>package.json</code>ãŒãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ãŸã‚ã€<code>nodejs</code>ã®ã‚¢ãƒ—ãƒªã«ãªã£ã¦ã—ã¾ã†ã€‚<br/>
ãªã®ã§ã€phpã®ãƒ“ãƒ«ãƒ‰ãƒ‘ãƒƒã‚¯ã‚’è¿½åŠ ã€‚<br/>
<a href="https://github.com/heroku/heroku-buildpack-php">https://github.com/heroku/heroku-buildpack-php</a></p>

<p><code>
$ heroku config:set BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-php
Setting config vars and restarting laravel-sample-on-heroku... done, v4
BUILDPACK_URL: https://github.com/heroku/heroku-buildpack-php
</code></p>

<blockquote><p>ã‚¢ãƒ—ãƒªã®ä½œæˆã¨åŒæ™‚ã«ã™ã‚‹ã«ã¯ã€<code>create</code>ã®å¾Œã«ã€<code>--buildpack URL</code>ã‚’è¿½åŠ ã—ã¦ã‚„ã‚‹ã¨ä¸€å›ã§è¨­å®šã§ãã‚‹ã€‚<br/>
$ heroku create laravel-sample-on-heroku &mdash;buildpack URL xxx</p></blockquote>

<p>ã™ã§ã«ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€pushã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã€‚</p>

<pre><code>$ git push heroku master
</code></pre>

<p>ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¨ã™ã§ã«å‹•ä½œã™ã‚‹çŠ¶æ…‹ã€‚</p>

<pre><code>$ heroku open
</code></pre>

<p>å®Œäº†ï¼</p>

<h2>DBã®è¨­å®š</h2>

<p>ã‚¢ãƒ‰ã‚ªãƒ³ã‚’è¿½åŠ (ç„¡æ–™)</p>

<pre><code>$ heroku addons:add heroku-postgresql:dev
</code></pre>

<p>DBã®æƒ…å ±ã‚’å–å¾—</p>

<pre><code>$ heroku config | grep HEROKU_POSTGRESQL
HEROKU_POSTGRESQL_CRIMSON_URL: postgres://UserName:Password@Host.compute-1.amazonaws.com:Port/DatabaseName  
</code></pre>

<p>ç”Ÿæˆã—ãŸDBã‚’ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¼ã«è¨­å®š</p>

<pre><code>$ heroku pg:promote HEROKU_POSTGRESQL_CRIMSON_URL
Promoting HEROKU_POSTGRESQL_CRIMSON_URL (DATABASE_URL) to DATABASE_URL... done
</code></pre>

<p>ã“ã“ã‹ã‚‰ã¯ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†</p>

<pre><code>$ vi config/database.php
---
//29è¡Œç›®
'default' =&gt; 'mysql',
â†“
'default' =&gt; 'pgsql',
---
//å†’é ­ã«è¿½åŠ 
$url = parse_url(getenv("DATABASE_URL"));

$host = $url["host"];
$username = $url["user"];
$password = $url["pass"];
$database = substr($url["path"], 1);
---
//67è¡Œç›®ã‹ã‚‰
'pgsql' =&gt; [
    'driver'   =&gt; 'pgsql',
    'host'     =&gt; $host,
    'database' =&gt; $database,
    'username' =&gt; $username,
    'password' =&gt; $password,
    'charset'  =&gt; 'utf8',
    'prefix'   =&gt; '',
    'schema'   =&gt; 'public',
],
</code></pre>

<p>pushã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤</p>

<pre><code>$ git add .
$ git commit -m 'setup Heroku PostgreSQL'
$ git push heroku master
</code></pre>

<p>æœ€å¾Œã«<a href="http://laravel3.kore1server.com/docs/database/migrations">ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</a>ã‚’å®Ÿè¡Œ</p>

<p><code>``
$ heroku run php artisan migrate
Running</code>php artisan migrate` attached to terminal&hellip; up, run.4728</p>

<hr />

<ul>
<li>  Application In Production!     *</li>
</ul>


<hr />

<p>Do you really wish to run this command? [y/N]y
Migration table created successfully.
Migrated: 2014_10_12_000000_create_users_table
Migrated: 2014_10_12_100000_create_password_resets_table
<code>``
</code>/auth/register<code>ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ç”»é¢ã€‚  
</code>/auth/login<code>ã§ãƒ­ã‚°ã‚¤ãƒ³ã€‚  
</code>/password/email`ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆã«ãªã‚‹ã€‚<br/>
(ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã¯è¨­å®šã—ã¦ã„ãªã„ã®ã§å‡ºæ¥ãªã„)</p>

<p>ä¸€é€šã‚Šã®è¨­å®šã¯ã“ã‚Œã§å®Œäº†ï¼<br/>
ã‚ã¨ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿æŒã«<a href="https://addons.heroku.com/memcachier">MemCachier</a>ã‹<a href="https://addons.heroku.com/?q=redi">Redis To Go</a>ã®è¨­å®šã‚„ã€<br/>
ãƒ¡ãƒ¼ãƒ«é€ä¿¡ç”¨ã«<a href="https://addons.heroku.com/sendgrid">SendGrid</a>ãªã©ãŒå¿…è¦ã«ãªã‚‹ã¨æ€ã†ã€‚</p>

<h2>ã‚µãƒ³ãƒ—ãƒ«</h2>

<p>ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã¯ä»¥ä¸‹ã€‚</p>

<p><a href="http://laravel-sample-on-heroku.herokuapp.com">http://laravel-sample-on-heroku.herokuapp.com</a></p>

<h2>å‚è€ƒ</h2>

<p><a href="http://qiita.com/MasatoYoshioka@github/items/1b4de4249dc40ff1d902">macosxã®phpã«mcryptã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« &ndash; Qiita</a><br/>
<a href="http://www.slideshare.net/esolves/deploy-laravel-on-heroku">Deploy Laravel on Heroku</a><br/>
<a href="https://mattstauffer.co/blog/laravel-on-heroku-using-a-postgresql-database">Laravel on Heroku &ndash; Using a PostgreSQL database &ndash; MattStauffer.co</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[mac]macã®PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/15/mac-update-php/"/>
    <updated>2015-04-15T20:15:38+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/15/mac-update-php</id>
    <content type="html"><![CDATA[<p>ã¨ã‚ã‚‹SDKã‚’composerçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„ã€ã¨æ€’ã‚‰ã‚Œã¦ã—ã¾ã£ãŸã€‚<br/>
ãªã®ã§ã€macã§5.6ã«ã—ãŸãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<p>ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå‰ã€‚</p>

<p><code>
$ php -v
PHP 5.4.38 (cli) (built: Mar 19 2015 14:49:15)
Copyright (c) 1997-2014 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2014 Zend Technologies
</code></p>

<hr />

<p>åŸºæœ¬çš„ã«ä»¥ä¸‹ã®ãƒãƒã€‚<br/>
<code>homebrew</code>ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã€‚</p>

<p><a href="http://takemaru123.hatenablog.jp/entry/2014/11/27/224037">macã«homebrewã§PHP5.6ç’°å¢ƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã‚‹ &ndash; ãŸã‘ã¾ã‚‹ã®æ—¥è¨˜</a></p>

<p>ã¾ãšã€xcode-selectã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã€‚<br/>
(Xcodeè‡ªä½“ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦)<br/>
(ç†ç”±ã¯ã‚ã‹ã¦ãªã„)</p>

<pre><code>$ xcode-select --install
</code></pre>

<p>ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚</p>

<blockquote><p>xcode-select: note: install requested for command line developer tools</p></blockquote>

<p><img src="/images/2015/04/mac_php_update_1.png" alt="ãƒ€ã‚¤ã‚¢ãƒ­ã‚°" /></p>

<p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚’æŠ¼ã™ã¨è¦ç´„åŒæ„ç”»é¢ã«é€²ã¿ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå§‹ã¾ã‚‹ã€‚</p>

<p><img src="/images/2015/04/mac_php_update_2.png" alt="è¦ç´„åŒæ„" /><br/>
<img src="/images/2015/04/mac_php_update_3.png" alt="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­" /></p>

<p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã«ä»¥ä¸‹ã§homebrewã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã€‚<br/>
(ã“ã“ã‚‚ã‚ˆãã‚ã‹ã£ã¦ãªã„)</p>

<pre><code>$ brew tap homebrew/php
$ brew tap homebrew/dupes
</code></pre>

<p>ã§ã€ã„ã‚ˆã„ã‚ˆPHP5.6ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚</p>

<pre><code>$ brew install php56 --with-apxs2=/usr/sbin/apxs
~~~~~
==&gt; Summary
ğŸº  /usr/local/Cellar/php56/5.6.7: 500 files, 51M
</code></pre>

<p>ã§ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’å†èµ·å‹•ã™ã‚‹ã¨ã€ç„¡äº‹ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸã€‚</p>

<p><code>
$ php -v
PHP 5.6.7 (cli) (built: Mar 22 2015 19:03:55)
Copyright (c) 1997-2015 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2015 Zend Technologies
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Facebookã®php-sdk-v4ã‚’composerã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸæ™‚ã®ãƒ¡ãƒ¢]]></title>
    <link href="http://kayakuguri.github.io/blog/2014/08/04/facebook-sdk-v4-composer/"/>
    <updated>2014-08-04T19:26:37+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2014/08/04/facebook-sdk-v4-composer</id>
    <content type="html"><![CDATA[<p>ä»Šæ›´ãªãŒã‚‰Facebookã®APIãŒv2.0ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚ŒãŸäº‹ã«ã‚ˆã‚‹<br/>
å½±éŸ¿ç¯„å›²ã®å¤§ãã•ã«ã‚·ãƒ§ãƒƒã‚¯ã‚’å—ã‘ã¦ã„ã¾ã™ã€‚</p>

<p><a href="http://kuneko.hatenadiary.com/entry/facebook_search_public_post">Facebookã®å…¨ä½“å…¬é–‹æŠ•ç¨¿ã¯2015å¹´ã«å®Œå…¨ã«æ¤œç´¢ã§ããªããªã‚‹ã‹ã‚‚ &ndash; ku:neko ism</a><br/>
<a href="http://snowadays.jp/2014/05/2762">Facebookãƒ­ã‚°ã‚¤ãƒ³ Version2.0ï¼ˆã‚¢ãƒ—ãƒªã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ä»•æ§˜å¤‰æ›´ï¼‰</a><br/>
<a href="http://qiita.com/hilotter/items/b88402505faeebbbce89">Facebook Graph API 2.0ã«ã¤ã„ã¦ &ndash; Qiita</a></p>

<!-- more -->


<p>ã§ã€æ–°ã—ã„ã‚‚ã®ã«å¯¾å¿œã—ãŸã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã¹ãã€<br/>
PHPã®SDKã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã¦ã€ã€ã¨æ€ã£ãŸã®ã§ã™ãŒã€composerã«å¯¾å¿œã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã€<br/>
composerã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚</p>

<p><a href="https://developers.facebook.com/docs/php/gettingstarted/4.0.0">Getting Started php-sdk-v4</a><br/>
ã“ã®å…¬å¼ã«ã‚ˆã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€ã ã‘ã€‚</p>

<pre><code>{
  "require" : {
    "facebook/php-sdk-v4" : "4.0.*"
  }
}
</code></pre>

<p>ã—ã‹ã—ã‚¨ãƒ©ãƒ¼ãŒã€‚</p>

<pre><code>Your requirements could not be resolved to an installable set of packages.
  Problem 1
- facebook/php-sdk-v4 4.0.9 requires php &gt;=5.4.0 -&gt; no matching package found.
</code></pre>

<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æŒ‡å®šã‚’ã€<code>4.0.9</code>ã¨ã—ãŸã‚Šã€<code>*</code>ã¨ã—ã¦ã¿ã¦ã‚‚åŒã˜ã€‚<br/>
ã‚°ã‚°ã£ã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®æƒ…å ±ã«å½“ãŸã‚‹ã€‚</p>

<p><a href="http://stackoverflow.com/questions/24269649/composer-not-installing-latest-facebook-php-sdk-due-to-multiple-php-versions">composer not installing latest facebook php sdk due to multiple php versions &ndash; Stack Overflow</a></p>

<p>ã©ã†ã‚„ã‚‰ã€php-sdk-v4ã¯ã€PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ5.4ã‹ã‚‰ã®å¯¾å¿œã€ãªã®ã ã‘ã‚Œã©ã€<br/>
PCã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä½ã„ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚‰ã—ã„ã€‚</p>

<p>ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èª¿ã¹ã¦ã¿ã‚‹ã¨ã€ãã£ã¡ã‚Šã€<code>5.3.28</code>ã€‚</p>

<pre><code>$ php -v
PHP 5.3.28 (cli) (built: Jan 23 2014 18:02:48)
</code></pre>

<p>èª¿ã¹ã¦ã¿ã‚‹ã¨ã€ä¸‹è¨˜ãŒä¸€ç•ªç°¡å˜ãã†ã ã£ãŸã®ã§ã€ã“ã®æ–¹æ³•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã€‚</p>

<p><a href="http://kimikimi714.hatenablog.com/entry/2013/07/06/233518">macã®phpã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ &ndash; ã‚ã™ã‚Œã£ã½ã„ãã¿ãˆ</a></p>

<pre><code>$ curl -s http://php-osx.liip.ch/install.sh | bash -s 5.5
</code></pre>

<p>ã§ã€ã“ã®ã¾ã¾ã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ã¯ãªã‚‰ãªã„ã®ã§ã€ãƒ‘ã‚¹ã‚’é€šã™ã€ã¨ã€‚<br/>
<code>~/.bashrc</code>ã®å†’é ­ã«ä¸‹è¨˜ã‚’è¿½åŠ ã—ã¦ãŠã„ãŸã€‚</p>

<pre><code>export PATH=/usr/local/php5/bin:$PATH
</code></pre>

<p>ã§ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å†åº¦ç¢ºèªã—ã¦ã¿ã‚‹ã¨ã€ç„¡äº‹ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ãŸã€‚</p>

<pre><code>$ php -v
PHP 5.5.14 (cli) (built: Jun 28 2014 10:29:43)
</code></pre>

<p>ã§ã€å†åº¦ã€composerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã‚‹ã¨ã€ç„¡äº‹ã€å®Œäº†ã—ãŸã€‚<br/>
ã“ã‚Œã§ã‚ˆã†ã‚„ãç’°å¢ƒãŒæ•´ã£ãŸã“ã¨ã«ãªã‚‹ã€‚</p>

<pre><code>  - Installing facebook/php-sdk-v4 (4.0.9)
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mailgun APIã‚’ä½¿ã£ã¦ãƒ¡ãƒ¼ãƒ«ã‚’é€ã‚‹ Composerç‰ˆ]]></title>
    <link href="http://kayakuguri.github.io/blog/2014/07/15/mailgunapi/"/>
    <updated>2014-07-15T14:13:12+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2014/07/15/mailgunapi</id>
    <content type="html"><![CDATA[<p>ã„ãã¤ã‹æ›¸ã„ã¦ã„ã‚‹mailgunã‚’ä½¿ç”¨ã—ãŸãƒ¡ãƒ¼ãƒ«é€ä¿¡ã®ä»¶ã§ã™ãŒã€<br/>
ãŸã¶ã‚“æ­£ã—ã„ã¨æ€ã‚ã‚Œã‚‹æ–¹æ³•ãŒã‚ã‹ã£ãŸã®ã§ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚</p>

<!-- more -->


<h3>composerã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h3>

<p><a href="https://github.com/mailgun/mailgun-php">mailgun/mailgun-php Â· GitHub</a></p>

<p>composerã‚’ä½¿ç”¨ã—ã¦ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<br/>
Composerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä»¥ä¸‹ãªã©ã‚’å‚ç…§ã«ã€‚<br/>
<a href="http://tech.basicinc.jp/php/2013/08/18/php_composer/">PHPã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†Composerã‚’ä½¿ã†</a></p>

<p>Windowsã®å ´åˆã¯ä»¥ä¸‹ã«æ›¸ãã¾ã—ãŸã€‚<br/>
<a href="http://kayakuguri.github.io/blog/2014/07/15/win7-composer/">Windows7ã§Composerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></p>

<p><code>composer.json</code>ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã€‚</p>

<pre><code>{
    "require": {
        "mailgun/mailgun-php": "~1.7.1"
    }
}
</code></pre>

<p>ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚</p>

<pre><code>$ composer install
</code></pre>

<p>ã“ã‚Œã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€mailgunã®ä¾å­˜é–¢ä¿‚ãŒå‡ºæ¥ä¸ŠãŒã‚Šã¾ã™ã€‚</p>

<h3>Mailgun</h3>

<h4>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h4>

<p>ã‚¢ãƒ‰ã‚ªãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚</p>

<pre><code>$ heroku addons:add mailgun
</code></pre>

<h4>ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h4>

<p>PHPã®å†’é ­ã§åˆæœŸåŒ–ã—ã¦é€ä¿¡ã€‚<br/>
åˆæœŸåŒ–ã™ã‚‹ãŸã‚ã«ã¯APIã‚­ãƒ¼ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒå¿…è¦ã€‚<br/>
ã“ã‚Œã¯ç’°å¢ƒå¤‰æ•°ã«å…¥ã£ã¦ã„ã‚‹ã€‚</p>

<pre><code>MAILGUN_API_KEY:       key-xxx
MAILGUN_SMTP_LOGIN:    postmaster@xxx.mailgun.org
MAILGUN_SMTP_PASSWORD: xxx
MAILGUN_SMTP_PORT:     587
MAILGUN_SMTP_SERVER:   smtp.mailgun.org
</code></pre>

<p>ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯ã€<code>MAILGUN_SMTP_LOGIN</code>ã®<code>@</code>ã‚ˆã‚Šå¾Œã‚ã€ã«ãªã‚‹ã®ã§ã€ãã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã€‚</p>

<pre><code>require 'vendor/autoload.php';
use Mailgun\Mailgun;

$mgClient = new Mailgun(getenv('MAILGUN_API_KEY'));
$domain = getenv('MAILGUN_SMTP_LOGIN');
$domain = substr($domain, strpos($domain, '@') + 1);
</code></pre>

<h4>é€ä¿¡</h4>

<p>é€šå¸¸ã®é€ä¿¡ã¯ä»¥ä¸‹ã€‚</p>

<pre><code>$result = $mgClient-&gt;sendMessage($domain, array(
    'from'    =&gt; 'Excited User &lt;me@samples.mailgun.org&gt;',
    'to'      =&gt; 'Baz &lt;baz@example.com&gt;',
    'subject' =&gt; 'Hello',
    'text'    =&gt; 'Testing some Mailgun awesomness!'
));
</code></pre>

<h4>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å€‹åˆ¥ã«è¨­å®š</h4>

<p>ä¸Šè¨˜ã§ã¯é€ä¿¡æ™‚ã«ä¸€æ‹¬ã§æŒ‡å®šã—ã¦ã„ã‚‹ã‘ã‚Œã©ã€ã“ã‚Œã‚’å€‹åˆ¥ã«è¨­å®šã™ã‚‹ã«ã¯ã€<br/>
<code>Message Builder</code>ã¨ã„ã†ã‚‚ã®ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br/>
<a href="https://github.com/mailgun/mailgun-php/blob/master/src/Mailgun/Messages/README.md#usage---message-builder">Usage &ndash; Message Builder</a></p>

<p>ä¸Šè¨˜ã®ã‚»ãƒƒãƒˆã‚’ãƒãƒ©ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<pre><code>$msgBldr = $mgClient-&gt;MessageBuilder();
$msgBldr-&gt;setFromAddress('Excited User &lt;me@samples.mailgun.org&gt;');
$msgBldr-&gt;addToRecipient('Baz &lt;baz@example.com&gt;');
$msgBldr-&gt;setSubject('Hello');
$msgBldr-&gt;setTextBody('Testing some Mailgun awesomness!'); 
$result = $mgClient-&gt;post("{$domain}/messages", $msgBldr-&gt;getMessage(), $msgBldr-&gt;getFiles());
</code></pre>

<h4>ã‚­ãƒ¥ãƒ¼ã«ã¾ã¨ã‚ã¦ç™»éŒ²</h4>

<p>ã¾ãŸã€ã‚­ãƒ¥ãƒ¼ã«ã¾ã¨ã‚ã¦ç™»éŒ²ã™ã‚‹å ´åˆã¯ã€<code>Batch Message</code>ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br/>
<a href="https://github.com/mailgun/mailgun-php/blob/master/src/Mailgun/Messages/README.md#usage---batch-message">Usage &ndash; Batch Message</a></p>

<p>ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦ã€toã‚’è¤‡æ•°ç™»éŒ²ã™ã‚‹ã¨ã€ãã‚Œãã‚Œã®toã«ãƒãƒ©ãƒãƒ©ã«åŒã˜ãƒ¡ãƒ¼ãƒ«ãŒé€ã‚‰ã‚Œã¾ã™ã€‚</p>

<pre><code>$msgBldr = $mgClient-&gt;BatchMessage($domain);
$msgBldr-&gt;addToRecipient('test1 &lt;test1@example.com&gt;');
$msgBldr-&gt;addToRecipient('test2 &lt;test2@example.com&gt;');
// ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šã¯åŒã˜
$result = $msgBldr-&gt;finalize();
</code></pre>

<p><code>finalize</code>ã§ã€ã‚­ãƒ¥ãƒ¼ã«ç™»éŒ²ã•ã‚Œã‚‹ã‚ˆã†ã§ã—ãŸã€‚</p>

<hr />

<p>ä»Šã¾ã§ã®mailguné–¢é€£ã®è¨˜äº‹ã¯ã“ã¡ã‚‰</p>

<ul>
<li><a href="http://kayakuguri.github.io/blog/2014/02/17/send-mail-from-heroku-with-mailgun/">PHPã§Mailgunã‚’ä½¿ã£ã¦herokuã§ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã™ã‚‹</a></li>
<li><a href="http://kayakuguri.github.io/blog/2014/02/18/php-heroku-sendattachmail/">[PHP]herokuã§æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ä»˜ããƒ¡ãƒ¼ãƒ«ã‚’é€ã‚‹</a></li>
<li><a href="http://kayakuguri.github.io/blog/2014/02/19/attachment-use-mailgunapi/">[PHP][heroku]Mailgun APIã‚’ä½¿ã£ã¦æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é€ã‚‹</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
