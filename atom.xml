<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[KayaMemo]]></title>
  <link href="http://kayakuguri.github.io/atom.xml" rel="self"/>
  <link href="http://kayakuguri.github.io/"/>
  <updated>2015-04-16T11:19:08+09:00</updated>
  <id>http://kayakuguri.github.io/</id>
  <author>
    <name><![CDATA[è±æ½œ]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[[Herokuã‚¢ãƒ‰ã‚ªãƒ³]Transloaditã‚¢ãƒ‰ã‚ªãƒ³ã‚’ä½¿ã£ã¦PHPã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/16/heroku-transloadit-1/"/>
    <updated>2015-04-16T10:32:46+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/16/heroku-transloadit-1</id>
    <content type="html"><![CDATA[<p>å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ + ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ãã‚Œã‚‹ã¨ã„ã†Transloaditã®herokuã‚¢ãƒ‰ã‚ªãƒ³ã‚’ä½¿ã£ã¦ã¿ãŸã€‚</p>

<!-- more -->


<h2>herokuã¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

<p>ç„¡æ–™ãƒ—ãƒ©ãƒ³ãŒã‚ã‚‹ã®ã§ã€ã¨ã‚Šã‚ãˆãšãã‚Œã§ã€‚</p>

<pre><code>$ heroku addons:add transloadit:sandbox
</code></pre>

<p>ç„¡æ–™ãƒ—ãƒ©ãƒ³ã®å ´åˆã¯ã€Encoding VolumeãŒ1GBã€ã®åˆ¶é™ãŒã‚ã‚‹ã€‚</p>

<p>transloaditã®æ–™é‡‘ä½“ç³»ã¯å°‘ã—ã‚„ã‚„ã“ã—ããªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã€<br/>
ç„¡æ–™ã®sandboxãƒ—ãƒ©ãƒ³ã ã¨ã€ãƒˆãƒ¼ã‚¿ãƒ«ã§1GBã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã€‚</p>

<p><a href="https://addons.heroku.com/transloadit">Transloadit | Add-ons | Heroku</a><br/>
<img src="http://kayakuguri.github.io/images/2015/04/transloadit02.jpg" alt="herokuæ–™é‡‘" /></p>

<p>å…¬å¼ãƒšãƒ¼ã‚¸ã®ãƒ—ãƒ©ãƒ³ã§ã‚‚å€¤æ®µã¯ä¸€ç·’ã€‚</p>

<p><a href="https://transloadit.com/pricing/">Pricing &amp; Signup | Transloadit</a><br/>
<img src="http://kayakuguri.github.io/images/2015/04/transloadit01.jpg" alt="å…¬å¼æ–™é‡‘" /></p>

<p>ã“ã®1GBã¨ã†ã®ã¯ä½•ãŒå«ã¾ã‚Œã‚‹ã‹ã¨ã„ã†ã¨ã€å…¬å¼ã§èª¬æ˜ãŒã‚ã£ãŸã€‚<br/>
ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãŸå ´åˆã€ã™ã‚‹å‰ã¨ã—ãŸå¾Œã¨ä¸¡æ–¹ã®ã‚µã‚¤ã‚ºãŒåˆç®—ã•ã‚Œã¦ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã‚ˆã†ã€‚</p>

<p>ä¾‹ãˆã°ã€0.8MBã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦0.2MBã—ãŸã¨ã™ã‚Œã°ã€ãã‚Œã§1MBã‚’ä½¿ç”¨ã—ãŸäº‹ã«ãªã‚‹ã€‚<br/>
ã§ã€ã“ã‚Œã‚’1024å›ç¹°ã‚Šè¿”ã™ã¨ã€1GBã«ãªã‚‹ã®ã§ç„¡æ–™æ ã¯çµ‚äº†ã€‚</p>

<p>ãƒ•ã‚¡ã‚¤ãƒ«ã®é–²è¦§è‡ªä½“ã«ã¯åŠ ç®—ã•ã‚Œãªã„ã‚ˆã†ã€‚</p>

<h2>PHP SDKã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

<p>å…¬å¼ã©ãŠã‚Šã€Composerã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{
</span><span class='line'>  "require": {
</span><span class='line'>    "transloadit/php-sdk": "dev-master"
</span><span class='line'>  }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ãƒ­ãƒ¼ã‚«ãƒ«ã§<code>composer install</code>ã—ã¦ãŠãã€‚<br/>
ã“ã®éš›ã€php5.6ä»¥ä¸Šã§ãªã„ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡ºæ¥ãªã„ã®ã§æ³¨æ„ã€‚<br/>
(è‡ªåˆ†ã®ç’°å¢ƒã§ã¯php5.4ã ã£ãŸã®ã§ã€<a href="http://kayamemo.mrlittlebig.com/blog/2015/04/15/mac-update-php/">ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸ</a>)</p>

<h2>ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h2>

<p>å…¬å¼ã«è¼‰ã£ã¦ã„ãŸãƒãƒã ã‘ã©ã€<br/>
ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨herokuä¸Šã®åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã ã‘ã€ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ã€‚</p>

<p><strong>PHPå…¨ã‚³ãƒ¼ãƒ‰</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?php
</span><span class='line'>require '../vendor/autoload.php';
</span><span class='line'>
</span><span class='line'>use transloadit\Transloadit;
</span><span class='line'>$transloadit = new Transloadit(array(
</span><span class='line'>    'key' =&gt; getenv('TRANSLOADIT_AUTH_KEY'),
</span><span class='line'>    'secret' =&gt; getenv('TRANSLOADIT_SECRET_KEY')
</span><span class='line'>));
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>$response = $transloadit-&gt;createAssembly(array(
</span><span class='line'>    'files' =&gt; array(dirname(__FILE__).'/160x160.png'),
</span><span class='line'>    'params' =&gt; array(
</span><span class='line'>        'steps' =&gt; array(
</span><span class='line'>            'resize' =&gt; array(
</span><span class='line'>                'robot' =&gt; '/image/resize',
</span><span class='line'>                'width' =&gt; 100,
</span><span class='line'>                'height' =&gt; 100,
</span><span class='line'>            )
</span><span class='line'>        )
</span><span class='line'>    ),
</span><span class='line'>));
</span><span class='line'>
</span><span class='line'>// Show the results of the assembly we spawned
</span><span class='line'>echo '&lt;pre&gt;';
</span><span class='line'>print_r($response);
</span><span class='line'>echo '&lt;/pre&gt;';</span></code></pre></td></tr></table></div></figure>


<p><strong>ãƒ¬ã‚¹ãƒãƒ³ã‚¹</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>transloadit\TransloaditResponse Object
</span><span class='line'>(
</span><span class='line'>    [data] =&gt; Array
</span><span class='line'>        (
</span><span class='line'>            [ok] =&gt; ASSEMBLY_EXECUTING
</span><span class='line'>            [message] =&gt; The assembly is currently being executed.
</span><span class='line'>            [assembly_id] =&gt; id
</span><span class='line'>            [parent_id] =&gt; 
</span><span class='line'>            [account_id] =&gt; id
</span><span class='line'>            [template_id] =&gt; 
</span><span class='line'>            [instance] =&gt; xxx.transloadit.com
</span><span class='line'>            [assembly_url] =&gt; http://api2.karima.transloadit.com/assemblies/xxx
</span><span class='line'>            [assembly_ssl_url] =&gt; https://karima.transloadit.com/assemblies/xxx
</span><span class='line'>            [bytes_received] =&gt; 1107
</span><span class='line'>            [bytes_expected] =&gt; 1107
</span><span class='line'>            [upload_duration] =&gt; 1.477
</span><span class='line'>            [client_agent] =&gt; Transloadit PHP SDK v2.0.0
</span><span class='line'>            [client_ip] =&gt; 10.166.13.48
</span><span class='line'>            [client_referer] =&gt; 
</span><span class='line'>            [start_date] =&gt; 2015/04/16 01:29:02 GMT
</span><span class='line'>            [is_infinite] =&gt; 
</span><span class='line'>            [has_dupe_jobs] =&gt; 
</span><span class='line'>            [execution_start] =&gt; 2015/04/16 01:29:03 GMT
</span><span class='line'>            [execution_duration] =&gt; 0.002
</span><span class='line'>            [notify_start] =&gt; 
</span><span class='line'>            [notify_url] =&gt; 
</span><span class='line'>            [notify_status] =&gt; 
</span><span class='line'>            [notify_response_code] =&gt; 
</span><span class='line'>            [notify_duration] =&gt; 
</span><span class='line'>            [last_job_completed] =&gt; 
</span><span class='line'>            [fields] =&gt; Array
</span><span class='line'>                (
</span><span class='line'>                )
</span><span class='line'>
</span><span class='line'>            [running_jobs] =&gt; Array
</span><span class='line'>                (
</span><span class='line'>                )
</span><span class='line'>
</span><span class='line'>            [bytes_usage] =&gt; 0
</span><span class='line'>            [executing_jobs] =&gt; Array
</span><span class='line'>                (
</span><span class='line'>                    [0] =&gt; resize
</span><span class='line'>                )
</span><span class='line'>
</span><span class='line'>            [started_jobs] =&gt; Array
</span><span class='line'>                (
</span><span class='line'>                    [0] =&gt; resize:::original
</span><span class='line'>                )
</span><span class='line'>
</span><span class='line'>            [parent_assembly_status] =&gt; 
</span><span class='line'>            [params] =&gt; {"steps":{"resize":{"robot":"/image/resize","width":100,"height":100}},"auth":{"key":"****","expires":"2015/04/16 03:29:01+00:00"}}
</span><span class='line'>            [template] =&gt; 
</span><span class='line'>            [uploads] =&gt; Array
</span><span class='line'>                (
</span><span class='line'>                    [0] =&gt; Array
</span><span class='line'>                        (
</span><span class='line'>                            [id] =&gt; xxx
</span><span class='line'>                            [name] =&gt; 160x160.png
</span><span class='line'>                            [basename] =&gt; 160x160
</span><span class='line'>                            [ext] =&gt; png
</span><span class='line'>                            [size] =&gt; 494
</span><span class='line'>                            [mime] =&gt; image/png
</span><span class='line'>                            [type] =&gt; image
</span><span class='line'>                            [field] =&gt; file_1
</span><span class='line'>                            [md5hash] =&gt; xxx
</span><span class='line'>                            [original_id] =&gt; xxx
</span><span class='line'>                            [original_basename] =&gt; 160x160
</span><span class='line'>                            [original_md5hash] =&gt; xxx
</span><span class='line'>                            [url] =&gt; http://tmp.transloadit.com.s3.amazonaws.com/xxx.png
</span><span class='line'>                            [ssl_url] =&gt; https://s3.amazonaws.com/tmp.transloadit.com/xxx.png
</span><span class='line'>                            [meta] =&gt; Array
</span><span class='line'>                                (
</span><span class='line'>                                    [width] =&gt; 160
</span><span class='line'>                                    [height] =&gt; 160
</span><span class='line'>                                    [date_recorded] =&gt; 
</span><span class='line'>                                    [date_file_created] =&gt; 
</span><span class='line'>                                    [date_file_modified] =&gt; 2015/04/16 01:29:02 GMT
</span><span class='line'>                                    [title] =&gt; 
</span><span class='line'>                                    [description] =&gt; 
</span><span class='line'>                                    [location] =&gt; 
</span><span class='line'>                                    [aspect_ratio] =&gt; 1
</span><span class='line'>                                    [city] =&gt; 
</span><span class='line'>                                    [state] =&gt; 
</span><span class='line'>                                    [country] =&gt; 
</span><span class='line'>                                    [country_code] =&gt; 
</span><span class='line'>                                    [keywords] =&gt; 
</span><span class='line'>                                    [aperture] =&gt; 
</span><span class='line'>                                    [exposure_compensation] =&gt; 
</span><span class='line'>                                    [exposure_mode] =&gt; 
</span><span class='line'>                                    [exposure_time] =&gt; 
</span><span class='line'>                                    [flash] =&gt; 
</span><span class='line'>                                    [focal_length] =&gt; 
</span><span class='line'>                                    [f_number] =&gt; 
</span><span class='line'>                                    [iso] =&gt; 
</span><span class='line'>                                    [light_value] =&gt; 
</span><span class='line'>                                    [metering_mode] =&gt; 
</span><span class='line'>                                    [shutter_speed] =&gt; 
</span><span class='line'>                                    [white_balance] =&gt; 
</span><span class='line'>                                    [device_name] =&gt; 
</span><span class='line'>                                    [device_vendor] =&gt; 
</span><span class='line'>                                    [device_software] =&gt; 
</span><span class='line'>                                    [latitude] =&gt; 
</span><span class='line'>                                    [longitude] =&gt; 
</span><span class='line'>                                    [orientation] =&gt; 
</span><span class='line'>                                    [has_clipping_path] =&gt; 
</span><span class='line'>                                    [creator] =&gt; 
</span><span class='line'>                                    [author] =&gt; 
</span><span class='line'>                                    [copyright] =&gt; 
</span><span class='line'>                                    [copyright_notice] =&gt; 
</span><span class='line'>                                    [frame_count] =&gt; 1
</span><span class='line'>                                    [colorspace] =&gt; Gray
</span><span class='line'>                                    [average_color] =&gt; #686868
</span><span class='line'>                                )
</span><span class='line'>
</span><span class='line'>                        )
</span><span class='line'>
</span><span class='line'>                )
</span><span class='line'>
</span><span class='line'>            [results] =&gt; Array
</span><span class='line'>                (
</span><span class='line'>                )
</span><span class='line'>
</span><span class='line'>        )
</span><span class='line'>
</span><span class='line'>    [curlInfo] =&gt; Array
</span><span class='line'>        (
</span><span class='line'>            [url] =&gt; https://karima.transloadit.com/assemblies
</span><span class='line'>            [content_type] =&gt; application/json; charset=utf-8
</span><span class='line'>            [http_code] =&gt; 200
</span><span class='line'>            [header_size] =&gt; 371
</span><span class='line'>            [request_size] =&gt; 220
</span><span class='line'>            [filetime] =&gt; -1
</span><span class='line'>            [ssl_verify_result] =&gt; 0
</span><span class='line'>            [redirect_count] =&gt; 0
</span><span class='line'>            [total_time] =&gt; 1.91859
</span><span class='line'>            [namelookup_time] =&gt; 0.012709
</span><span class='line'>            [connect_time] =&gt; 0.421413
</span><span class='line'>            [pretransfer_time] =&gt; 0.435759
</span><span class='line'>            [size_upload] =&gt; 1107
</span><span class='line'>            [size_download] =&gt; 2527
</span><span class='line'>            [speed_download] =&gt; 1317
</span><span class='line'>            [speed_upload] =&gt; 576
</span><span class='line'>            [download_content_length] =&gt; -1
</span><span class='line'>            [upload_content_length] =&gt; 1107
</span><span class='line'>            [starttransfer_time] =&gt; 0.43577
</span><span class='line'>            [redirect_time] =&gt; 0
</span><span class='line'>            [redirect_url] =&gt; 
</span><span class='line'>            [primary_ip] =&gt; 10.234.41.26
</span><span class='line'>            [certinfo] =&gt; Array
</span><span class='line'>                (
</span><span class='line'>                )
</span><span class='line'>
</span><span class='line'>            [primary_port] =&gt; 443
</span><span class='line'>            [local_ip] =&gt; 172.18.203.90
</span><span class='line'>            [local_port] =&gt; 41591
</span><span class='line'>        )
</span><span class='line'>
</span><span class='line'>    [curlErrorNumber] =&gt; 0
</span><span class='line'>    [curlErrorMessage] =&gt; 
</span><span class='line'>)</span></code></pre></td></tr></table></div></figure>


<p>ç”»åƒã®URLã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã€<code>data &gt; uploads &gt; url(ssl_url)</code>ã«å…¥ã£ã¦ã„ã‚‹ã€‚</p>

<h2>çµæœ</h2>

<p>herokuã®ã‚¢ãƒ‰ã‚ªãƒ³ã‹ã‚‰Transloaditä¸Šã§ç¢ºèªã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãŸã€‚<br/>
<img src="http://kayakuguri.github.io/images/2015/04/transloadit03.jpg" alt="çµæœ" /></p>

<p>ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹äº‹ã§è©³ç´°ã‚’ç¢ºèªå‡ºæ¥ã‚‹ã€‚<br/>
ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèªã‚„ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚‚ã“ã“ã‹ã‚‰å¯èƒ½ã€‚<br/>
<img src="http://kayakuguri.github.io/images/2015/04/transloadit04.jpg" alt="è©³ç´°" /></p>

<h2>å‚è€ƒ</h2>

<p><a href="https://addons.heroku.com/transloadit">Transloadit | Add-ons | Heroku</a><br/>
<a href="https://devcenter.heroku.com/articles/transloadit">Transloadit | Heroku Dev Center</a><br/>
<a href="https://transloadit.com/">File upload processing web service | Transloadit</a><br/>
<a href="https://github.com/transloadit/php-sdk">transloadit/php-sdk</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[mac]macã®PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/15/mac-update-php/"/>
    <updated>2015-04-15T20:15:38+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/15/mac-update-php</id>
    <content type="html"><![CDATA[<p>ã¨ã‚ã‚‹SDKã‚’composerçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„ã€ã¨æ€’ã‚‰ã‚Œã¦ã—ã¾ã£ãŸã€‚<br/>
ãªã®ã§ã€macã§5.6ã«ã—ãŸãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<p>ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå‰ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ php -v
</span><span class='line'>PHP 5.4.38 (cli) (built: Mar 19 2015 14:49:15)
</span><span class='line'>Copyright (c) 1997-2014 The PHP Group
</span><span class='line'>Zend Engine v2.4.0, Copyright (c) 1998-2014 Zend Technologies</span></code></pre></td></tr></table></div></figure>


<hr />

<p>åŸºæœ¬çš„ã«ä»¥ä¸‹ã®ãƒãƒã€‚<br/>
<code>homebrew</code>ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã€‚</p>

<p><a href="http://takemaru123.hatenablog.jp/entry/2014/11/27/224037">macã«homebrewã§PHP5.6ç’°å¢ƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã‚‹ &ndash; ãŸã‘ã¾ã‚‹ã®æ—¥è¨˜</a></p>

<p>ã¾ãšã€xcode-selectã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã€‚<br/>
(Xcodeè‡ªä½“ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦)<br/>
(ç†ç”±ã¯ã‚ã‹ã¦ãªã„)</p>

<pre><code>$ xcode-select --install
</code></pre>

<p>ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚</p>

<blockquote><p>xcode-select: note: install requested for command line developer tools</p></blockquote>

<p><img src="http://kayakuguri.github.io/images/2015/04/mac_php_update_1.png" alt="ãƒ€ã‚¤ã‚¢ãƒ­ã‚°" /></p>

<p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚’æŠ¼ã™ã¨è¦ç´„åŒæ„ç”»é¢ã«é€²ã¿ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå§‹ã¾ã‚‹ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/04/mac_php_update_2.png" alt="è¦ç´„åŒæ„" /><br/>
<img src="http://kayakuguri.github.io/images/2015/04/mac_php_update_3.png" alt="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­" /></p>

<p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã«ä»¥ä¸‹ã§homebrewã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã€‚<br/>
(ã“ã“ã‚‚ã‚ˆãã‚ã‹ã£ã¦ãªã„)</p>

<pre><code>$ brew tap homebrew/php
$ brew tap homebrew/dupes
</code></pre>

<p>ã§ã€ã„ã‚ˆã„ã‚ˆPHP5.6ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚</p>

<pre><code>$ brew install php56 --with-apxs2=/usr/sbin/apxs
~~~~~
==&gt; Summary
ğŸº  /usr/local/Cellar/php56/5.6.7: 500 files, 51M
</code></pre>

<p>ã§ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’å†èµ·å‹•ã™ã‚‹ã¨ã€ç„¡äº‹ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ php -v
</span><span class='line'>PHP 5.6.7 (cli) (built: Mar 22 2015 19:03:55)
</span><span class='line'>Copyright (c) 1997-2015 The PHP Group
</span><span class='line'>Zend Engine v2.6.0, Copyright (c) 1998-2015 Zend Technologies</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[apex]ãƒˆãƒªã‚¬ãƒ¼ã®ã‚¤ãƒ³ã‚µãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/14/apex-test-trigger/"/>
    <updated>2015-04-14T17:31:36+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/14/apex-test-trigger</id>
    <content type="html"><![CDATA[<p>è¨€ã‚ã‚Œã¦ã¿ã‚Œã°å½“ãŸã‚Šå‰ãªã‚“ã§ã™ãŒã€ãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<p>ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒã‚¤ãƒ³ã‚µãƒ¼ãƒˆã•ã‚ŒãŸéš›ã«ãƒ‡ãƒ¼ã‚¿å†…å®¹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã€é–“é•ã£ã¦ã„ã‚Œã°ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã€ã¨ã„ã†ãƒˆãƒªã‚¬ãƒ¼ã‚’ä½œæˆã—ãŸã€‚<br/>
è¦ã™ã‚‹ã«ã€è‡ªå‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã¿ãŸã„ãªã‚‚ã®ã€‚<br/>
ã“ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸéš›ã«ã€ãã®ã‚¨ãƒ©ãƒ¼éƒ¨åˆ†ã‚‚é€šã‚‹ã‚ˆã†ã«ä½œã£ã¦ã—ã¾ã†ã¨ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰è‡ªä½“ãŒã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ã¦ãƒã‚§ãƒƒã‚¯å‡ºæ¥ãªã‹ã£ãŸã€‚</p>

<p>ã§ã€è§£æ±ºç­–ã¨ã—ã¦ã¯å˜ç´”ã§ã€<code>tryã€œcatch</code>ã‚’ä½¿ã†ã€‚</p>

<p>ä»¥ä¸‹ã€ä¾‹ã€‚</p>

<h3>apex</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>trigger SampleLeadTrigger on Lead (before insert) {
</span><span class='line'>    for(Lead obj : Trigger.New){
</span><span class='line'>        if(obj.LastName == 'test'){
</span><span class='line'>            obj.addError('testã¨ã„ã†åå‰ã¯ä½¿ãˆã¾ã›ã‚“');
</span><span class='line'>            continue;
</span><span class='line'>        }
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>å§“ã«ã€<code>test</code>ã¨ã„ã†æ–‡å­—åˆ—ã®ä½¿ç”¨ã‚’ã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼ã§ã™ã€‚</p>

<h3>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰</h3>

<p>ä»¥ä¸‹ã«ã‚ˆã†ã«ãã®ã¾ã¾ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>@isTest
</span><span class='line'>private class Test_SampleLeadTrigger {
</span><span class='line'>    static testMethod void excute(){
</span><span class='line'>        Lead test_obj = new Lead();
</span><span class='line'>        test_obj.Company = 'hoge co.';
</span><span class='line'>        test_obj.LastName = 'test';
</span><span class='line'>        
</span><span class='line'>        insert test_obj;
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã„ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã§ãã¾ã›ã‚“ã€‚</p>

<blockquote><p>18:14:44:833 FATAL_ERROR System.DmlException: Insert failed. First exception on row 0; first error: FIELD_CUSTOM_VALIDATION_EXCEPTION, testã¨ã„ã†åå‰ã¯ä½¿ãˆã¾ã›ã‚“: []</p></blockquote>

<p>ãªã®ã§ã€<code>insert</code>ã™ã‚‹éƒ¨åˆ†ã‚’<code>try-catch</code>ã§ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>@isTest
</span><span class='line'>private class Test_SampleLeadTrigger {
</span><span class='line'>    static testMethod void excute(){
</span><span class='line'>        Lead test_obj = new Lead();
</span><span class='line'>        test_obj.Company = 'hoge co.';
</span><span class='line'>        test_obj.LastName = 'test';
</span><span class='line'>        
</span><span class='line'>        try{
</span><span class='line'>          insert test_obj;
</span><span class='line'>        }catch(Exception e){
</span><span class='line'>            
</span><span class='line'>        }
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã§ã‚¨ãƒ©ãƒ¼ã§æ­¢ã¾ã‚‰ãªããªã‚‹ã®ã§å®Ÿè¡Œã¯å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚<br/>
catchã®éƒ¨åˆ†ã¯ä»Šå›ã§è¨€ãˆã°ã€<code>DmlException</code>ãªã®ã§ã€ãã‚Œã§ã‚‚ã‚ˆã„ã§ã™ãŒã€ã‚ˆã‚Šåºƒã„ã‚¨ãƒ©ãƒ¼ã§ã€<code>Exception</code>ã«ã—ã¦ã„ã¾ã™ã€‚<br/>
ã“ã®è¾ºã¯ã‚ã¾ã‚Šæ·±ãè¿½æ±‚ã—ã¦ã¾ã›ã‚“ã€‚ã€‚</p>

<p>ã§ã€ã“ã‚Œã ã¨ãƒ†ã‚¹ãƒˆã¯é€šã‚Šã¾ã™ãŒã€ãƒ†ã‚¹ãƒˆã®æ„å‘³ã¯ã‚ã¾ã‚Šãªã„ã¨æ€ã†ã®ã§ã€æ„å›³ã—ãŸã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ã¦ãã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p>

<p><code>try-catch</code>éƒ¨åˆ†</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>try{
</span><span class='line'>    insert test_obj;
</span><span class='line'>}catch(Exception e){
</span><span class='line'>    Boolean expectedExceptionThrown =  e.getMessage().contains('testã¨ã„ã†åå‰ã¯ä½¿ãˆã¾ã›ã‚“') ? true : false;
</span><span class='line'>  System.AssertEquals(expectedExceptionThrown, true);
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã§æŒ‡å®šã—ãŸã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ã¦ããŸã‹ã©ã†ã‹ãŒãƒã‚§ãƒƒã‚¯ã§ãã¾ã™ã€‚<br/>
ã‚‚ã—æŒ‡å®šã—ãŸã‚¨ãƒ©ãƒ¼ä»¥å¤–ã®ã‚‚ã®ãŒè¿”ã£ã¦ããŸå ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã§ããªããªã£ã¦ã—ã¾ã†ã®ã§é–“é•ã„ã«æ°—ä»˜ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p>

<blockquote><p>System.AssertException: Assertion Failed: Expected: false, Actual: true</p></blockquote>

<p>ï¼ˆ<code>e.getMessage()</code>ã¯ã€ System.DmlException:ã€œã®æ–‡è¨€ã‚’å«ã‚“ã å†…å®¹ã¨ãªã‚‹ã®ã§ã€<code>contains</code>é–¢æ•°ã§æŒ‡å®šã®æ–‡å­—åˆ—ãŒ<strong>å«ã¾ã‚Œã¦ã„ã‚‹</strong>ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ã€‚ï¼‰</p>

<h3>å‚è€ƒ</h3>

<p><a href="https://developer.salesforce.com/forums/ForumsMain?id=906F00000008xGuIAI">How do I test for an exception(&lsquo;addError&rsquo;) in a Trigger ? &ndash; Salesforce Developer Community</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[CakePHP]400ç³»ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã«ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã›ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/13/cake-php-404-redirect/"/>
    <updated>2015-04-13T15:35:00+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/13/cake-php-404-redirect</id>
    <content type="html"><![CDATA[<p>ã‚°ã‚°ã‚‹ã¨è‰²ã€…ã¨æ–¹æ³•ãŒå‡ºã¦ãã‚‹ã®ã§ä»Šæ›´ã§ã™ãŒã€<br/>
è¨˜äº‹ã«ã‚ˆã£ã¦å¾®å¦™ã«é•ã£ãŸã®ã§ã€æœ€çµ‚çš„ã«ä¸Šæ‰‹ãã„ã£ãŸã‚‚ã®ã‚’ãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<p>cakephpãŒã‚¨ãƒ©ãƒ¼ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¦ã„ã‚‹Controllerã¯ä»¥ä¸‹ã€‚<br/>
<code>/lib/Cake/Error/ExceptionRenderer.php</code></p>

<p>ã“ã®ä¸­ã®ã€219è¡Œç›®ã‚ãŸã‚Šã«ã‚ã‚‹ã€<code>error400</code>ã®å‡¦ç†ãŒ400ç³»ã‚¨ãƒ©ãƒ¼æ™‚ã®å‡¦ç†ã«ã‚ãŸã‚‹ã€‚<br/>
ãªã®ã§ã€ã“ã‚Œã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¦ã‚„ã‚‹å½¢ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‡¦ç†ã‚’æ›¸ãã€‚<br/>
(ç›´æ¥ç·¨é›†ã—ã¦ã‚‚ã„ã„ãŒã€ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ ã«ãªã‚‹ã®ã§ãªã‚‹ã¹ãè§¦ã‚‰ãªã„ã»ã†ãŒã‚ˆã•ã’)</p>

<p>ã¾ãšã‚¨ãƒ©ãƒ¼ã®éš›ã®å‡¦ç†ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã€‚<br/>
<code>/lib/Cake/Error/AppExceptionRenderer.php</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?php
</span><span class='line'>App::uses('ExceptionRenderer', 'Error');
</span><span class='line'>
</span><span class='line'>class AppExceptionRenderer extends ExceptionRenderer {
</span><span class='line'>    public function error400($error) { // 400ç•ªå°ã®ã‚¨ãƒ©ãƒ¼æ™‚ã«å‘¼ã°ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä¸Šæ›¸ã
</span><span class='line'>        $this-&gt;controller-&gt;redirect(array('controller' =&gt; 'users', 'action' =&gt; 'index'), 301);
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ã“ã®æ™‚ã«æ³¨æ„ç‚¹ã¯ã€<code>redirect</code>é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã¨ãã«ã€<code>$this-&gt;controller</code>çµŒç”±ã§å‘¼ã³å‡ºã•ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ãŸã€‚<br/>
<code>$this-&gt;redirect()</code>ã§ã¯ãƒ€ãƒ¡ã ã£ãŸã€‚</p>

<p>ã§ã€coreã‚¯ãƒ©ã‚¹ã§ã‚¨ãƒ©ãƒ¼æ™‚ã«å‘¼ã³å‡ºã™ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ãŸã‚¯ãƒ©ã‚¹ã«å¤‰æ›´ã€‚</p>

<p><code>/app/Config/core.php</code> 79è¡Œç›®ä»˜è¿‘</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>'renderer' =&gt; 'ExceptionRenderer',
</span><span class='line'>â†“â†“
</span><span class='line'>'renderer' =&gt; 'AppExceptionRenderer',</span></code></pre></td></tr></table></div></figure>


<p>å¾Œã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãªã©ãŒãªã„ãƒšãƒ¼ã‚¸ã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚Œã°ã€æŒ‡å®šã®ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãŒç™ºç”Ÿã™ã‚‹ã€‚</p>

<h3>å‚è€ƒ</h3>

<p><a href="https://www.markernet.co.jp/blog/2014/06/12/post-1622/">CakePHP2.Xã§404 Not Foundã‚¨ãƒ©ãƒ¼ã‚’ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹æ–¹æ³• | WEBåˆ¶ä½œãƒ–ãƒ­ã‚°</a><br/>
<a href="http://studio-faust.com/programming/258/">CakePHP2 404ã‚¨ãƒ©ãƒ¼ã®å ´åˆã«ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ | Web Studio Faust</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[apex]Dateå‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/10/format-date/"/>
    <updated>2015-04-10T10:55:07+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/10/format-date</id>
    <content type="html"><![CDATA[<p>ä½•å›ã‹ã‚°ã‚°ã£ã¦ã„ã‚‹ã®ã§ã€å‚™å¿˜éŒ²ã€‚</p>

<!-- more -->


<p>Dateå‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ä¸€å¿œç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãŒã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå†…å®¹ã‚’æŒ‡å®šãŒå‡ºæ¥ãªã„ã‚ˆã†ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Date d = Date.newInstance(2015, 4, 10);
</span><span class='line'>System.debug(d); //2015-04-10 00:00:00
</span><span class='line'>String d_str = d.format();
</span><span class='line'>System.debug(d_str); //2015/04/10</span></code></pre></td></tr></table></div></figure>


<p><code>format('yyyy-MM-dd')</code>ã¨ã‹æ›¸ãã¨æ€’ã‚‰ã‚Œã‚‹ã€‚<br/>
<a href="https://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_date.htm#apex_System_Date_format">Date Class &ndash; format()</a></p>

<p>ä»£ã‚ã‚Šã«Datetimeå‹ã®å ´åˆã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æŒ‡å®šã—ã¦å‡ºåŠ›ãŒå¯èƒ½ã€‚<br/>
ãªã®ã§ã€Dateå‹ã®ã‚‚ã®ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæŒ‡å®šã—ã¦å‡ºåŠ›ã—ãŸã„å ´åˆã¯ã€ä¸€åº¦Datetimeå‹ã«å¤‰æ›ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>

<p>apexã®Datetimeå‹ã®æ‰±ã„ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã€ãã®ã¾ã¾å¤‰æ›ã—ã¦Datetimeå‹ã®ã¾ã¾ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒæ¨™æº–æ™‚ã«ãªã£ã¦ï¼™æ™‚é–“æˆ»ã£ã¦ã—ã¾ã†ã€‚<br/>
ãŸã ã—ãã‚Œã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¦æ–‡å­—åˆ—ã«ã™ã‚‹ã¨ã¾ãŸå…ƒã«æˆ»ã‚‹ã€‚
æŒ‡å®šã™ã‚‹ãªã‚‰ã™ã‚‹ã€ã—ãªã„ãªã‚‰ã—ãªã„ã€ã§çµ±ä¸€ã—ã¦ã„ã‚‹ã¨ã‚„ã‚„ã“ã—ããªã‚‰ãªãã¦ã™ã¿ãã†ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Date d = Date.newInstance(2015, 4, 10);
</span><span class='line'>System.debug(d);  //2015-04-10 00:00:00
</span><span class='line'>Datetime dt = Datetime.newInstance(d.year(), d.month(), d.day());
</span><span class='line'>System.debug(dt);  //2015-04-09 15:00:00
</span><span class='line'>String dt_str = dt.format('yyyy-MM-dd');
</span><span class='line'>System.debug(dt_str);  //2015-04-10</span></code></pre></td></tr></table></div></figure>


<h3>å‚è€ƒ</h3>

<p><a href="https://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_date.htm#apex_System_Date_format">Date Class &ndash; format()</a><br/>
<a href="https://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_datetime.htm#apex_System_Datetime_format_2">Datetime Class &ndash; format(string)</a><br/>
<a href="http://stackoverflow.com/questions/11834873/salesforce-apex-validating-date-for-format-and-value">validation &ndash; Salesforce Apex: Validating date for format and value &ndash; Stack Overflow</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[heroku]sslè¨­å®šæ™‚ã®ã‚¨ãƒ©ãƒ¼ã«ã¤ã„ã¦ã®ãƒ¡ãƒ¢]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/09/ssl-error/"/>
    <updated>2015-04-09T13:03:29+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/09/ssl-error</id>
    <content type="html"><![CDATA[<p>ç°¡å˜ãªäº‹ã ã£ãŸã®ã§ã™ãŒã€æƒ…å ±ãŒè¦‹ã¤ã‘ã‚‰ã‚Œãªã‹ã£ãŸã®ã§ãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<p>herokuã«sslã‚’é©ç”¨ã•ã›ã‚‹å ´åˆã€è¨¼æ˜æ›¸ã¨ç§˜å¯†éµã‚’ã‚¢ãƒ‰ã‚ªãƒ³ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚<br/>
å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã€‚</p>

<pre><code>$ heroku certs:add è¨¼æ˜æ›¸ ç§˜å¯†éµ
</code></pre>

<p>ãã®éš›ã«ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ã¦æ¥ãŸã€‚</p>

<blockquote><p>Unable to parse certificate. Please ensure the certificate is in PEM format.</p></blockquote>

<p>å†…å®¹ã¯ç‰¹ã«é–“é•ã£ã¦ã„ã‚‹ã¨ã¯æ€ãˆãšã€ä½•åº¦è¦‹è¿”ã—ã¦ã‚‚æ­£ã—ã„ã€‚</p>

<p>çµå±€åŸå› ã¯ã€æœ‰åŠ¹æœŸé–“å‰ã€ã¨ã„ã†ãªã‚“ã¨ã‚‚å˜ç´”ãªäº‹ã ã£ãŸã€‚<br/>
å–å¾—ã—ãŸæ™‚ç‚¹ã§ã¯ã¾ã é–‹å§‹å‰ã®çŠ¶æ…‹ã§ã€æœŸé™å‰ã€‚<br/>
ã‚ã¾ã‚ŠæœŸé™ã‚’å…ˆã«ã—ã¦å–å¾—ã™ã‚‹ã“ã¨ã£ã¦ãªã„ã®ã‹ã€ã‚°ã‚°ã£ã¦ã‚‚ç‰¹ã«å‡ºã¦ã“ãšã€‚<br/>
æœŸé™å¤–ã ã£ãŸã‚‰ãã†æ€’ã£ã¦ãã‚Œã‚Œã°ã„ã„ã®ã«ã€ä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼å†…å®¹ã§ã¯ãã®äº‹ãŒç‰¹ã«ã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã‚‚ãƒãƒã‚Šãƒã‚¤ãƒ³ãƒˆã§ã—ãŸã€‚</p>

<p>ã¡ãªã¿ã«æœ‰åŠ¹æœŸé–“ã®ç¢ºèªã¯ä»¥ä¸‹ã€‚</p>

<pre><code>$ openssl x509 -in è¨¼æ˜æ›¸ -noout -dates
</code></pre>

<p>ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§è¿”ã£ã¦ãã‚‹ã€‚</p>

<pre><code>notBefore=Apr  8 15:00:00 2015 GMT
notAfter=Apr  8 14:59:59 2016 GMT
</code></pre>

<p>æœŸé–“å†…ã ã¨å•é¡Œãªãã‚¢ãƒƒãƒ—å‡ºæ¥ã¾ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[salesforce]ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã«çµ„ç¹”åŒ–ã®å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/07/sf-seealldata-test/"/>
    <updated>2015-04-07T14:40:33+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/07/sf-seealldata-test</id>
    <content type="html"><![CDATA[<p>salesforceã§ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã•ã›ã‚‹å ´åˆã€é€šå¸¸ã§ã‚ã‚Œã°ãƒ‡ãƒ¼ã‚¿ã¯ãƒ†ã‚¹ãƒˆç”¨ã«ã‚³ãƒ¼ãƒ‰å†…ã§ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br/>
ã—ã‹ã—ã€çµ„ç¹”å†…ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥ä½¿ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆã—ãŸã„å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ã‚ã‚Šã¾ã™ã€‚<br/>
ãã‚“ãªæ™‚ã®ãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<p>ãƒ†ã‚¹ãƒˆã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚Œã°ã‚ˆã„ã ã‘ã€‚</p>

<pre><code>@isTest(SeeAllData=true)
</code></pre>

<p>ã“ã‚Œã§çµ„ç¹”åŒ–ã«ã‚ã‚‹å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆã®å®Ÿè¡ŒãŒè¡Œãˆã¾ã™ã€‚<br/>
ã§ã™ãŒã€ã‚‚ã¡ã‚ã‚“sandboxã¨æœ¬ç•ªç’°å¢ƒã«å·®ç•°ãŒã‚ã‚‹å ´åˆã¯sandboxã§é€šã£ãŸãƒ†ã‚¹ãƒˆãŒæœ¬ç•ªã§ã¯é€šã‚‰ãªã„ã€ã‚«ãƒãƒ¼ç‡ãŒä½ã„ã€ã¨ã„ã†ã“ã¨ãŒã‚ã‚Šãˆã¾ã™ã®ã§æ³¨æ„ã§ã™ã€‚</p>

<p>ã“ã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã‚·ãƒ¥ãƒã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã¯ã€æ´»å‹•å±¥æ­´(<code>ActivityHistory</code>)ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br/>
æ´»å‹•å±¥æ­´ã¯ç›´æ¥SOQLã§ã¯ä½œæˆã§ããšã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å†…ã§ä½œæˆã—ãŸãƒ‡ãƒ¼ã‚¿ã«ã¯ç´ä»˜ã„ã¦ä½œæˆã•ã‚Œã¾ã›ã‚“ã€‚<br/>
è¦ã™ã‚‹ã«ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã™ã‚‹æ‰‹æ®µãŒãªã„ã€ã‚ˆã†ã€‚<br/>
ãã®éš›ã«ä¸Šè¨˜ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†äº‹ã§çµ„ç¹”å†…ã«ä½œæˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã®ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã«ãªã£ã¦ãã¾ã™ã€‚</p>

<p>ã‚‚ã¨ã‚‚ã¨salesforceã¯<code>Spring '12</code>ãƒªãƒªãƒ¼ã‚¹ã¾ã§ã¯(<code>API 24.0</code>ã‚ˆã‚Šå¤ã„ã‚‚ã®)ã§ã¯å…¨ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ãŒå‡ºæ¥ãŸã‚ˆã†ã€‚<br/>
ãã‚Œã ã¨çµ„ç¹”å†…ã®ãƒ‡ãƒ¼ã‚¿ã«ä¾å­˜ã—ã¦ã—ã¾ã£ã¦ä¸Šæ‰‹ããƒ†ã‚¹ãƒˆå®Ÿè¡ŒãŒå‡ºæ¥ãªã„ã€ã¨ã„ã†çŠ¶æ…‹ã ã£ãŸãŸã‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯çµ„ç¹”å†…ã®ãƒ‡ãƒ¼ã‚¿ã«ã¯ã‚¢ã‚¯ã‚»ã‚¹å‡ºæ¥ãªã„ã‚ˆã†ã«å¤‰æ›´ã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚<br/>
ã§ã€ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„å ´åˆã¯ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã°ã‚ˆã„ã€ã¨ã€‚<br/>
ä¸Šæ‰‹ãä½¿ãˆã°ãƒ†ã‚¹ãƒˆãŒéå¸¸ã«è½ã«ãªã‚Šãã†ã§ã™(é•ã†)ã€‚</p>

<p>ä¸Šè¨˜ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ãªãã¦ã‚‚ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ã¯çµ„ç¹”å†…ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒãŒå¯èƒ½ãªã‚ˆã†ã§ã™ã€‚</p>

<ul>
<li>User</li>
<li>Profile</li>
<li>Organization</li>
<li>RecordType</li>
<li>ApexClass</li>
<li>ApexTrigger</li>
<li>ApexComponent</li>
<li>ApexPage</li>
</ul>


<h3>å‚è€ƒ</h3>

<p><a href="http://dackdive.hateblo.jp/entry/2014/07/05/100926">[Salesforce]æ´»å‹•å±¥æ­´(ActivityHistory)ãŒãƒ†ã‚¹ãƒˆã§å–å¾—ã§ããªã„ï¼Ÿ &ndash; dackdive&#39;s blog</a><br/>
<a href="http://blog.flect.co.jp/salesforce/2012/05/post-9aec.html">ã‚»ãƒ¼ãƒ«ã‚¹ãƒ•ã‚©ãƒ¼ã‚¹ã®è±†çŸ¥è­˜: ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ãŒå¤‰ã‚ã‚Šã¾ã—ãŸ</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[CakaPHP]ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®å¿…é ˆãƒã‚§ãƒƒã‚¯]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/06/cakephp-radio-validation/"/>
    <updated>2015-04-06T12:58:39+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/06/cakephp-radio-validation</id>
    <content type="html"><![CDATA[<p>ã¾ãŸã‚‚ã‚„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚¿ã€‚<br/>
ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã«ãŸã„ã—ã¦æœªé¸æŠã®ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹æ–¹æ³•ã€‚</p>

<!-- more -->


<p>ãƒ¢ãƒ‡ãƒ«ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã«ã€<code>'required' =&gt; true</code>ã¨ã‹ã‚’å…¥ã‚Œã‚Œã°ã‚ˆã„ã ã‘ã‹ã¨ãŠã‚‚ã„ãã‚„ã€ãªã‹ãªã‹ä¸€ç­‹ç¸„ã§ã¯ã„ã‹ãªã£ãŸã€‚</p>

<h3>&lsquo;required&rsquo; => true</h3>

<p><code>'required' =&gt; true</code>ã‚’è¨­å®šã—ãŸã ã‘ã§ã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ãŒé©ç”¨ã•ã‚Œãªã„ã‚ˆã†ã€‚<br/>
ãƒ«ãƒ¼ãƒ«ã‚’åŒæ™‚ã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ã‹ã€‚<br/>
ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ„å‘³ã¯ã€æŒ‡å®šã®ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã«ãƒã‚§ãƒƒã‚¯ã•ã‚Œã‚‹ã‚ˆã†ã€‚(ãŸã¶ã‚“)</p>

<p>ãƒ«ãƒ¼ãƒ«ã«ã¯ç©ºã ã¨ã‚¨ãƒ©ãƒ¼ã€ã¨ã„ã†ã“ã¨ã§ã€<code>notEmpty</code>ã‚’è¿½åŠ ã€‚<br/>
ã“ã‚Œã§å¿…é ˆã®ãƒã‚§ãƒƒã‚¯ã®ã¿ã¯å®Œäº†ã€‚</p>

<h3>requiredå±æ€§</h3>

<p>ãƒ¢ãƒ‡ãƒ«ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«inputã‚¿ã‚°ã®å±æ€§ã«ã€<code>required</code>ãŒè¿½åŠ ã•ã‚Œã¦ã—ã¾ã†ã€‚<br/>
ã“ã®ã¾ã¾é€ä¿¡ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€Chromeé™å®šã ã¨æ€ã†ãŒã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸé€ä¿¡å‡ºæ¥ãªã„ã€‚</p>

<blockquote><p>An invalid form control with name=&lsquo;xxx&rsquo; is not focusable.</p></blockquote>

<p>Chromeã§ã¯<code>required</code>å±æ€§ãŒå…¥ã£ãŸinputã§ãƒ‡ãƒ¼ã‚¿ãŒãªã‹ã£ãŸå ´åˆã¯ã€å¹ãå‡ºã—ã®ã‚ˆã†ãªã‚‚ã®ã‚’å‡ºã™ã‚ˆã†ãªä»•æ§˜ã«ãªã£ã¦ã„ã‚‹ãŒã€<br/>
radioãƒœã‚¿ãƒ³ã®å ´åˆã¯ãã®å¹ãå‡ºã—ã‚’å‡ºã™å ´æ‰€ãŒãªãã¦ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã†ã¿ãŸã„ã€‚</p>

<h4>å›é¿æ–¹æ³•</h4>

<p>å›é¿æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚‹ã‚ˆã†ã€‚</p>

<p>ï¼‘ï¼‰<br/>
ãªã®ã§radioãƒœã‚¿ãƒ³ã®å ´åˆã¯ã“ã®å±æ€§ã‚’å…¥ã‚Œã¦ã¯ã„ã‘ãªã„ã€‚<br/>
cakeã®å ´åˆã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«<code>'required' =&gt; false</code>ã‚’æŒ‡å®šã—ã¦ã‚„ã‚‹ã“ã¨ã§å‡ºã•ãªã„ã‚ˆã†ã«å‡ºæ¥ãŸã€‚</p>

<p>ï¼’ï¼‰<br/>
<code>form</code>ã‚¿ã‚°ã®ç”Ÿæˆæ™‚ã«<code>novalidate</code>ã‚’trueã§ã‚»ãƒƒãƒˆã—ã¦ã‚„ã‚Œã°ãã®ä¸­ã®inputã‚¿ã‚°ã«ã¯ã€<code>required</code>å±æ€§ãŒã¤ã‹ãªããªã‚‹ã‚ˆã†ã€‚<br/>
å…¨éƒ¨ã«ã‚»ãƒƒãƒˆå‡ºæ¥ã‚‹ã¨ã„ã†æ„å‘³ã§ã¯ã“ã‚ŒãŒä¸€ç•ªãŠæ‰‹è»½ã‹ã‚‚ã€‚</p>

<h3>ã‚½ãƒ¼ã‚¹</h3>

<p>æœ€çµ‚çš„ãªã‚½ãƒ¼ã‚¹ã®æŠœç²‹ã¯ä»¥ä¸‹ã€‚</p>

<h4>ãƒ¢ãƒ‡ãƒ«</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>'radio_data' =&gt; array(
</span><span class='line'>    array(
</span><span class='line'>        'rule' =&gt; 'notEmpty',
</span><span class='line'>        'message' =&gt; 'é¸æŠã—ã¦ä¸‹ã•ã„'
</span><span class='line'>    ),
</span><span class='line'>)</span></code></pre></td></tr></table></div></figure>


<h4>ãƒ“ãƒ¥ãƒ¼</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?php echo $this-&gt;Form-&gt;input('radio_data', array(
</span><span class='line'>  'type' =&gt; 'radio',
</span><span class='line'>  'options' =&gt; array('OK', 'NG'),
</span><span class='line'>  'required' =&gt; false
</span><span class='line'>));?&gt;</span></code></pre></td></tr></table></div></figure>


<p>ã‚‚ã—ãã¯ã€</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?php echo $this-&gt;Form-&gt;create('Model', array('novalidate' =&gt; true));  ?&gt;
</span><span class='line'>~~~ä¸­ç•¥~~~
</span><span class='line'>&lt;?php echo $this-&gt;Form-&gt;input('radio_data', array(
</span><span class='line'>  'type' =&gt; 'radio',
</span><span class='line'>  'options' =&gt; array('OK', 'NG'),
</span><span class='line'>));?&gt;</span></code></pre></td></tr></table></div></figure>


<h3>å‚è€ƒ</h3>

<p><a href="http://stackoverflow.com/questions/7168645/invalid-form-control-only-in-google-chrome">html &ndash; &quot;Invalid form control&quot; only in Google Chrome &ndash; Stack Overflow</a><br/>
<a href="http://d.hatena.ne.jp/cakephper/20130211/1360589926">CakePHP2.3ã‹ã‚‰inputã‚¿ã‚°ã«html5ã®requiredå±æ€§ãŒã¤ãã‚ˆã†ã«ãªã£ãŸ &ndash; cakephperã®æ—¥è¨˜(CakePHP, Laravel, PHP)</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[CakePHP]URLã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/03/cakephp-routing-params/"/>
    <updated>2015-04-03T14:37:52+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/03/cakephp-routing-params</id>
    <content type="html"><![CDATA[<p>cakeè¨˜æ³•ï¼Ÿã§æ›¸ã‹ã‚ŒãŸURLã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<h2>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ã¿ã§åˆ¶å¾¡</h2>

<p>cakephpã§ã®URLã®åŸºæœ¬ã¯ä»¥ä¸‹ã€‚</p>

<blockquote><p>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼å/ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å</p></blockquote>

<p>ã“ã‚Œã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã¤ã‘ãŸã‘ã‚Œã°ã€ãã®å¾Œã‚ã«ä¸¦ã¹ã‚‹ã®ã¿ã€‚</p>

<blockquote><p>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼å/ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å/ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿1/ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿2</p></blockquote>

<p>ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã¯ä»¥ä¸‹ã€‚</p>

<pre><code>//URL - ctrl/act/param1/param2

$this-&gt;params['pass'][0]; //param1
$this-&gt;params['pass'][1]; //param2
</code></pre>

<p>ã§ã€æŒ‡å®šã®åå‰ã‚’ä»˜ã‘ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã€‚</p>

<blockquote><p>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼å/ã‚¢ã‚¯ã‚·ãƒ§ãƒ³/ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å1:ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿/ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å2:ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</p></blockquote>

<pre><code>//URL - ctrl/act/param1:hoge/param2:fuga

$this-&gt;params['named']['param1'];
$this-&gt;params['named']['param2'];
</code></pre>

<p>ã§ã€Viewå´ã§ã“ã®ãƒªãƒ³ã‚¯ã‚’ä½œã‚‹æ–¹æ³•ã¯ä»¥ä¸‹ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?php echo $this-&gt;Html-&gt;link('ãƒªãƒ³ã‚¯ãƒ†ã‚­ã‚¹ãƒˆ', array(
</span><span class='line'>  'controller' =&gt; 'ctrl',
</span><span class='line'>  'action' =&gt; 'act',
</span><span class='line'>  'param1' =&gt; 'hoge'
</span><span class='line'>)) ?&gt;</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>ã“ã‚Œã§ä¸Šè¨˜ã®ã€<code>/ctrl/act/param1:hoge</code>ãŒç”Ÿæˆã•ã‚Œã‚‹</p>

<h2>ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>

<p>ã“ã®ã¾ã¾ã ã¨URLãŒå†—é•·ã«ãªã‚‹ã®ã§ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¨­å®šã—ã¦ã€ã‚¹ãƒƒã‚­ãƒªã•ã›ã‚‹ã€‚<br/>
ã•ã‚‰ã«äºˆã‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã‚’æŒ‡å®šã—ã¦ã‚„ã‚‹ã€‚</p>

<h4>ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h4>

<pre><code>Router::connect('/ctrl/act/:param1', array('controller' =&gt; 'ctrl', 'action' =&gt; 'act'));
</code></pre>

<p>ã“ã†ã™ã‚‹ã¨ã€ä¸Šè¨˜ã§è¨˜è¿°ã—ãŸãƒªãƒ³ã‚¯ã‚’è²¼ã‚‹ã¨ã€ä»¥ä¸‹ã®URLãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚</p>

<pre><code>/ctrl/act/hoge
</code></pre>

<p>ã“ã‚Œã‚’å–å¾—ã™ã‚‹ã«ã¯ä»¥ä¸‹ã€‚</p>

<pre><code>$this-&gt;params['param1']
</code></pre>

<p>ã“ã‚Œã®æ–¹ãŒè¦‹ãŸç›®ã‚‚å–å¾—æ–¹æ³•ã‚‚ã™ã£ãã‚Šã—ã¦ã¦ã‚ˆã•ã’ã€‚</p>

<h2>å‚è€ƒ</h2>

<p><a href="http://creazy.net/2009/05/cakephp_routing.html">http://creazy.net/2009/05/cakephp_routing.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[CakePHP]Transitionã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŠ¹ã‹ã›ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’æŒ‡å®š]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/04/01/cakephp-transition-validate/"/>
    <updated>2015-04-01T19:22:30+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/04/01/cakephp-transition-validate</id>
    <content type="html"><![CDATA[<p>ã¾ãŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚¿ã€‚<br/>
cakephpã§ãƒ•ã‚©ãƒ¼ãƒ ä½œæˆã®éš›ã«ã€Transitionã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã¨ã™ã“ã¶ã‚‹ä¾¿åˆ©ã€‚<br/>
ä»¥ä¸‹ãŒä½¿ã„æ–¹ã¨ã—ã¦ã¯ã‚ã‹ã‚Šã‚„ã™ã‹ã£ãŸã€‚<br/>
<a href="http://endoyuta.com/2013/05/18/cakephp-transition%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%881-0/">cakePHP Transitionã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ &ndash; Logicky Blog</a></p>

<!-- more -->


<p>ã§ã€ãã®ä¸­ã§ã€å…¥åŠ›ç”»é¢ã‹ã‚‰ç¢ºèªç”»é¢ã«é·ç§»ã™ã‚‹éš›ã«æŒ‡å®šã—ãŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã•ã›ãŸã‹ã£ãŸã€‚<br/>
ãŸã„ã¦ã„ã®ã‚µã‚¤ãƒˆã§ã¯ã€<code>$this-&gt;Transition-&gt;checkData('xxx')</code>ã‚’ä½¿ãˆã°ã‚ˆã„ã€ã¨æ›¸ã„ã¦ã‚ã£ãŸã®ã ãŒã€ãã‚Œã ã¨åŠ¹ã‹ãªã‹ã£ãŸã€‚<br/>
åŸå› ã‚’æ¢ã—ã¦ã„ã‚‹ã¨ã€ã©ã†ã‚„ã‚‰ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã§è¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨åŠ¹ã‹ãªã„ã‚ˆã†ã€‚<br/>
ãã‚“ãªã¨ãã¯<code>checkData</code>ã®ç¬¬ï¼’å¼•æ•°ã§ãƒ¢ãƒ‡ãƒ«ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ã¦ã‚„ã‚‹ã¨åŠ¹ãã‚ˆã†ã«ãªã£ãŸã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class FormController extends AppController
</span><span class='line'>{
</span><span class='line'>  public $uses = array('User', 'Hoge', 'Fuga');
</span><span class='line'>  
</span><span class='line'>  public function input(){
</span><span class='line'>      $this-&gt;Transition-&gt;checkData('confirm','Hoge');
</span><span class='line'>      ...
</span><span class='line'>  }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ä¸Šè¨˜ã®ã‚ˆã†ã«æ›¸ãã¨ã€<code>Hoge</code>ãƒ¢ãƒ‡ãƒ«ã§è¨˜è¿°ã—ãŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒé©ç”¨ã•ã‚Œã‚‹ã€‚<br/>
ã“ã“ã‚’é…åˆ—ã«ã—ã¦è¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ã‚’æŒ‡å®šã—ã¦ã‚„ã‚‹ã“ã¨ã‚‚å¯èƒ½ã ãã†ã€‚</p>

<p><a href="http://d.hatena.ne.jp/kunit/20101005#1286265311">[PHP][CakePHP] Transitionã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ &ndash; checkData() ã«ã¤ã„ã¦</a></p>

<p>ãã‚Œã«ã—ã¦ã‚‚ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã³ã£ãã‚Šã™ã‚‹ãã‚‰ã„ä¾¿åˆ©ã€‚ã»ã‚“ã¨ã«ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[CakePHP]æ‰‹å‹•ã§ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã«ã‹ã‘ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/03/31/cake-php-validates/"/>
    <updated>2015-03-31T21:06:40+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/03/31/cake-php-validates</id>
    <content type="html"><![CDATA[<p>æœ€è¿‘cakephpã‚’è§¦ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã‚ˆã†ã‚„ãã€‚<br/>
ã§ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‹ã‚‰æ˜ç¤ºçš„ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‹ã‘ã‚‹æ–¹æ³•ã‚’èª¿ã¹ãŸã®ã§ãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<p>ã¾ãšæº–å‚™ã¨ã—ã¦ã€<code>Model</code>ã«ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¿°ã—ã¾ã™ã€‚<br/>
ä»Šå›ã¯<code>User</code>ã¨ã„ã†ãƒ¢ãƒ‡ãƒ«å†…ã«è¨˜è¿°ã—ãŸã¨ã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var $validate = array(
</span><span class='line'>  'password' =&gt; array(
</span><span class='line'>        'rule' =&gt; array('minLength', 8),
</span><span class='line'>        'message' =&gt; 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„'
</span><span class='line'>    )
</span><span class='line'>);</span></code></pre></td></tr></table></div></figure>


<p>ã§ã€æ¬¡ã«<code>View</code>ã§å…¥åŠ›æ¬„ã‚’ä½œæˆã—ã¾ã™ã€‚<br/>
ä½œæˆã®éš›ã«ã€å…ˆç¨‹ä½œã£ãŸãƒ«ãƒ¼ãƒ«ã®<code>password</code>ã‚’<code>type</code>ã¨ã—ã¦æŒ‡å®šã—ã¦ã‚„ã‚Šã¾ã™ã€‚</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;input('User.password', array('type' =&gt; 'password', 'value' =&gt; '','label' =&gt; false)); ?&gt;
</code></pre>

<p>HTMLã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<pre><code>&lt;input name="data[User][password]" value="" type="password" id="UserPassword" required="required"&gt;
</code></pre>

<p>æœ€å¾Œã«<code>Controller</code>ã‹ã‚‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã¾ã™ã€‚<br/>
è¨˜è¿°ã™ã‚‹ç®‡æ‰€ã¯ã€ãƒ•ã‚©ãƒ¼ãƒ ã‚’é€ä¿¡ã—ãŸå¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$this-&gt;User-&gt;set($this-&gt;request-&gt;data); //ãƒ¢ãƒ‡ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚»ãƒƒãƒˆ
</span><span class='line'>if(!$this-&gt;User-&gt;validates()){
</span><span class='line'>  //ã‚¨ãƒ©ãƒ¼æ™‚ã®æŒ™å‹•
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã§8æ–‡å­—ä»¥ä¸‹ã§é€ä¿¡ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<h3>å‚è€ƒ</h3>

<p><a href="http://book.cakephp.org/2.0/ja/models/data-validation/validating-data-from-the-controller.html">http://book.cakephp.org/2.0/ja/models/data-validation/validating-data-from-the-controller.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[salesforce]Apex RESTä½œæˆæ™‚ã®tips]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/03/27/apex-rest-tips/"/>
    <updated>2015-03-27T19:45:44+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/03/27/apex-rest-tips</id>
    <content type="html"><![CDATA[<p>æœ€è¿‘ã‚ˆãApexRESTã‚’ä½œæˆã—ã¦ã„ã¦ã€<br/>
ãã®ä¸­ã§ã¡ã‚‡ã£ã¨ã—ãŸtipsã¨ã„ã†ã‹ãƒ¡ãƒ¢ã‚’ãƒ¡ãƒ¢ã£ã¦ãŠãã¾ã™ã€‚</p>

<!-- more -->


<h2>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</h2>

<p>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®æŒ‡å®šã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¾ã™ã€‚</p>

<pre><code>@RestResource(urlMapping='/User/Login')
</code></pre>

<p>ã“ã®æ™‚ã«ã€<code>*</code>ã‚’ä½¿ã†äº‹ã‚‚å‡ºæ¥ã¾ã™ã€‚</p>

<pre><code>@RestResource(urlMapping='/User/*')
</code></pre>

<p>ãªã®ã§ã€ã“ã“ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å…¥ã‚ŒãŸã‚Šã—ã¦ã€ãã®IDã‚’å–å¾—ã™ã‚‹ã“ã¨ã§ã€<br/>
ã‚ˆã‚ŠREST APIã‚‰ã—ã„(?)æŒ™å‹•ã§APIã‚’ä½œæˆã™ã‚‹äº‹ãŒå‡ºæ¥ã¾ã™ã€‚<br/>
apexå´ã§é€ä¿¡ã•ã‚ŒãŸIDã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«<code>/</code>ã§åŒºåˆ‡ã£ã¦å–å¾—ã—ã¾ã™ã€‚</p>

<pre><code>String accountId = req.requestURI.substring(req.requestURI.lastIndexOf('/')+1);
</code></pre>

<p>å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ­£ã«ã“ã®ã¾ã¾ã®å†…å®¹ãŒè¼‰ã£ã¦ã„ã¾ã—ãŸã€‚</p>

<p><a href="https://www.salesforce.com/us/developer/docs/apexcode/Content/apex_rest_code_sample_basic.htm">Apex REST Basic Code Sample</a></p>

<h2>JSON</h2>

<p>è¿”å´ã™ã‚‹JSONã®å½¢å¼ã§ã™ãŒã€ã‚¯ãƒ©ã‚¹ã®å…¥ã‚Œå­ã‚„ã€<code>List</code>ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§<br/>
ã‹ãªã‚Šè‡ªç”±åº¦é«˜ãä½œæˆå‡ºæ¥ã¾ã™ã€‚</p>

<p>ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªJSONã‚’è¿”ã™ã¨ã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"success":1,
</span><span class='line'>"User" : {
</span><span class='line'>  "user_id": xxx,
</span><span class='line'>  "hobby":[
</span><span class='line'>      {"name":"æ˜ ç”»", "level":"3"},
</span><span class='line'>      {"name":"ã‚µãƒƒã‚«ãƒ¼", "level":"1"}
</span><span class='line'>  ]
</span><span class='line'>},
</span><span class='line'>"request_time": "2015-3-27 12:33"</span></code></pre></td></tr></table></div></figure>


<p>ã“ã®å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¯ãƒ©ã‚¹ã‚’è¤‡æ•°ä½œã‚Šã€å…¥ã‚Œå­æ§‹é€ ã‚’ä½œã‚‹äº‹ã§ä½œæˆå‡ºæ¥ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>global class UserData{
</span><span class='line'>  global String user_id;
</span><span class='line'>  global HobbyData hobby
</span><span class='line'>}
</span><span class='line'>global class HobbyData{
</span><span class='line'>  global String name;
</span><span class='line'>  global String level;
</span><span class='line'>}
</span><span class='line'>global class resultData{
</span><span class='line'>  global Integer success;
</span><span class='line'>  global UserData User;
</span><span class='line'>  global String request_time;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ä½œæˆã™ã‚‹ã¨ãã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>List&lt;HobbyData&gt; hobbies = new List&lt;HobbyData&gt;();
</span><span class='line'>HobbyData hobby1 = new HobbyData();
</span><span class='line'>hobby1.name = 'æ˜ ç”»';
</span><span class='line'>hobby1.level = '3';
</span><span class='line'>hobbies.add(hobby1);
</span><span class='line'>HobbyData hobby2 = new HobbyData();
</span><span class='line'>hobby2.name = 'ã‚µãƒƒã‚«ãƒ¼';
</span><span class='line'>hobby2.level = '1';
</span><span class='line'>hobbies.add(hobby2);
</span><span class='line'>
</span><span class='line'>UserData user = new UserData();
</span><span class='line'>user.user_id = 'xxx';
</span><span class='line'>user.hobby = hobbies;
</span><span class='line'>
</span><span class='line'>resultData result = new resultData();
</span><span class='line'>result.success = 1;
</span><span class='line'>result.User = user;
</span><span class='line'>result.request_time = '2015-3-27 12:33';
</span><span class='line'>
</span><span class='line'>return result;</span></code></pre></td></tr></table></div></figure>


<p>åœ°é“ãªä½œæ¥­ã«ã¯ãªã‚Šã¾ã™ãŒã€ã“ã‚Œã§ã‚ã‚Šã‹ã—ç¶ºéº—ãªJSONãŒè¿”ã›ã¾ã—ãŸã€‚<br/>
ã‚‚ã£ã¨ç°¡å˜ãªæ–¹æ³•ãŒã‚ã£ãŸã‚‰ã¾ãŸæ›¸ãã¾ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[command+Qã¨ã„ã†å±é™ºãªã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’å¤‰æ›´ã™ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/03/26/cmd-q/"/>
    <updated>2015-03-26T14:22:21+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/03/26/cmd-q</id>
    <content type="html"><![CDATA[<p>Chromeã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹æ™‚ã«ã€ã‚¿ãƒ–ã‚’é–‰ã˜ã‚ˆã†ã¨ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã§ã‚ã‚‹ã€<code>cmd + w</code>ã‚’æŠ¼ã—ãŸã¤ã‚‚ã‚ŠãŒã€<br/>
æ‰‹ãŒæ»‘ã£ã¦æ¨ªã®<code>Q</code>ã‚’æŠ¼ã—ã¦ã—ã¾ã„ãƒ–ãƒ©ã‚¦ã‚¶ãŒè½ã¡ã‚‹â€¦ã€‚</p>

<!-- more -->


<p>ãã‚“ãªäº‹ãŒçµæ§‹ã‚ã£ã¦ã€ãã®åº¦ã«æœºã«çªã£ä¼ã—ã¦ã„ãŸã®ã§ã€<br/>
ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’å¤‰æ›´å‡ºæ¥ãªã„ã‚‚ã®ã‹ã¨æ€ã„ã€èª¿ã¹ã¦å®Ÿè¡Œã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<p>ã¾ãšã¯ç¾çŠ¶ã®ç¢ºèªã€‚<br/>
ä»¥ä¸‹ã®é€šã‚Šã€ã‚¢ãƒ—ãƒªã‚’é–‰ã˜ã‚‹ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã¯ã€<code>cmd+q</code>ã§ã™ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/comd_q_01.jpg" alt="cmd+q" /></p>

<p>ã“ã‚Œã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ã€<code>ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®š</code>ã‹ã‚‰ã€<code>ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰</code>ã‚’é¸æŠã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/comd_q_02.jpg" alt="ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰" /></p>

<p><code>ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ</code>ã®ã‚¿ãƒ–ã‚’é¸æŠã—ã€<code>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</code>ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é¸æŠã€‚<br/>
ãã®ä¸‹ã«å‡ºã‚‹ã€<code>+</code>ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’è¿½åŠ ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/comd_q_03.jpg" alt="ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³" /></p>

<p>ã“ã“ã§å‡ºã¦ãã‚‹å…¥åŠ›ã‚¨ãƒªã‚¢ã«ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®åå‰ã‚’å…¥åŠ›ã™ã‚‹ãŒã€<br/>
ç¾çŠ¶è¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼åã‚’æ­£ç¢ºã«å…¥åŠ›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚<br/>
Chromeã‚’çµ‚äº†ã®å ´åˆã¯ã€ä»¥ä¸‹ã€‚</p>

<pre><code>Google Chrome ã‚’çµ‚äº†
</code></pre>

<p><img src="http://kayakuguri.github.io/images/2015/03/comd_q_04.jpg" alt="ãƒ¡ãƒ‹ãƒ¥ãƒ¼å" /></p>

<p><code>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</code>ã¯ã€<code>Google Chrome</code>ã‚’é¸æŠã—ã€<br/>
å…¥åŠ›æ¬„ã«ã¯ã€ä¸Šè¨˜ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼åã‚’å…¥åŠ›ã€‚<br/>
ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã«ã¯ã€ä»Šå›ã¯ã€<code>option+command+Q</code>ã‚’è¨­å®šã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/comd_q_05.jpg" alt="è¨­å®š" /></p>

<p><code>è¿½åŠ </code>ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¿½åŠ ã™ã‚‹ã¨ã€è¨­å®šå®Œäº†ã€‚<br/>
chromeå´ã‚’è¦‹ã¦ã‚‚ãã£ã¡ã‚Šè¨­å®šã•ã‚Œã¦ã„ã‚‹ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/comd_q_06.jpg" alt="ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ" /></p>

<p>ã“ã‚Œã§æŠ¼ã—é–“é•ã„ã®æ‚²åŠ‡ãŒãªããªã‚Šã¾ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[heroku]PG Backupsã®ã‚¢ãƒ‰ã‚ªãƒ³ãŒå»ƒæ­¢ã•ã‚Œherokuã‚³ãƒãƒ³ãƒ‰ã«çµ„ã¿è¾¼ã¾ã‚Œã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/03/17/new-pg-backups/"/>
    <updated>2015-03-17T16:34:50+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/03/17/new-pg-backups</id>
    <content type="html"><![CDATA[<p>ã‚¿ã‚¤ãƒˆãƒ«ã®é€šã‚Šã€‚<br/>
ä»Šã¾ã§ã‚¢ãƒ‰ã‚ªãƒ³ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ãŸPG BackupsãŒã‚¢ãƒ‰ã‚ªãƒ³ã¨ã—ã¦ã®æä¾›ãŒå»ƒæ­¢ã•ã‚Œã€<br/>
æ¨™æº–ã®herokuã‚³ãƒãƒ³ãƒ‰ã«çµ„ã¿è¾¼ã¾ã‚ŒãŸã€ã¨ã®ã“ã¨ã€‚</p>

<!-- more -->


<p><a href="https://blog.heroku.com/archives/2015/3/11/pgbackups-levels-up">Heroku | PG Backups Levels Up</a></p>

<h2>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°</h2>

<p>ä»Šã¾ã§ã¯ã‚¢ãƒ‰ã‚ªãƒ³ã®ç¨®é¡ã§é¸ã‚“ã§ã„ãŸå®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã§ã™ãŒã€æ™‚é–“ã‚’æŒ‡å®šã—ã¦ã®å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒå¯èƒ½ã«ãªã£ãŸã¨ã®ã“ã¨ã€‚<br/>
ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚‚æŒ‡å®šã§ãã‚‹ã€‚</p>

<pre><code>heroku pg:backups schedule HEROKU_POSTGRESQL_GOLD --at="02:00 PDT" --app sushi
</code></pre>

<p>ã¡ãªã¿ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ï¼‘æ—¥ã«ï¼‘å›ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒè¡Œã‚ã‚Œã¦ãŠã‚Šã€ãã‚Œã‚’ã‚ãˆã¦æ­¢ã‚ã‚‹ã«ã¯ã€<code>heroku pg:backups unschedule DATABASE_URL --app sushi</code>ã¨ã™ã‚‹ã¨ã®ã“ã¨ã€‚</p>

<h2>ã‚³ãƒãƒ³ãƒ‰</h2>

<p>æ—§ã‚¢ãƒ‰ã‚ªãƒ³æ™‚ã«ä½¿ç”¨ã—ã¦ã„ãŸã‚³ãƒãƒ³ãƒ‰ã¯ä½¿ãˆãªããªã£ã¦ãŠã‚Šã€æ–°ã—ã<code>pg:backups</code>ãŒåŸºæœ¬ã«ãªã£ãŸã‚ˆã†ã€‚  <br/>
ä»¥ä¸‹ã€æŠœç²‹ã€‚</p>

<h3>ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ä½œæˆ</h3>

<pre><code>//æ—§
$ heroku pgbackups:capture --app sushi

//æ–°
$ heroku pg:backups capture --app sushi
</code></pre>

<h3>ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h3>

<pre><code>//æ—§
$ heroku pgbackups:url

//æ–°
$ heroku pg:backups public-url
</code></pre>

<p>ãã®ä»–ã¯ä»¥ä¸‹ã®å¯¾å¿œãƒšãƒ¼ã‚¸ã«ã¦ã€‚<br/>
<a href="https://devcenter.heroku.com/articles/mapping-pgbackups-commands">Converting PGBackups Add-on Commands | Heroku Dev Center</a></p>

<h2>å‚è€ƒ</h2>

<p><a href="https://devcenter.heroku.com/articles/heroku-postgres-backups">Heroku PGBackups | Heroku Dev Center</a><br/>
<a href="https://devcenter.heroku.com/articles/heroku-postgresql">Heroku Postgres | Heroku Dev Center</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AWS Route53ã‚’ä½¿ç”¨ã—ã¦Githubãƒšãƒ¼ã‚¸ã«ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®šã™ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/03/10/set-subdomain/"/>
    <updated>2015-03-10T23:51:46+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/03/10/set-subdomain</id>
    <content type="html"><![CDATA[<p>é•·ã‚‰ãgithub.ioã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ã§é‹ç”¨ã—ã¦ãã¾ã—ãŸãŒã€<br/>
ã“ã®åº¦ãµã¨æ€ã„ç«‹ã£ã¦ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å‰²ã‚Šå½“ã¦ã¦ã¿ã¾ã—ãŸã€‚</p>

<!-- more -->


<p>ã‚‚ã¨ã‚‚ã¨herokuã§ä½œæˆã—ãŸãƒ–ãƒ­ã‚°ã«ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å‰²ã‚Šå½“ã¦ã¦ãŠã‚Šã€<br/>
ãã®DNSè¨­å®šã«Route53ã‚’ä½¿ç”¨ã—ã¦ã„ãŸã®ã§ã€ä»Šå›ã‚‚ãã‚Œã‚’ä½¿ç”¨ã—ã¦ã¿ã‚‹ã€‚<br/>
(ã¨ã„ã†ã‹ã€å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹äº‹ã«ãªã‚‹ã®ã§ã€ãã‚Œã—ã‹ã§ããªã„)</p>

<p>ç°¡å˜ã«å…¨ä½“ã®æµã‚Œã‚’èª¬æ˜ã™ã‚‹ã¨ã€<br/>
Route53ã§CNAMEã®è¨­å®šã‚’ã—ã¦ã€Githubãƒšãƒ¼ã‚¸ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹è¨­å®šã‚’ã‹ã‘ã‚‹ã€ã ã‘ã€‚</p>

<h2>Route53ã®è¨­å®š</h2>

<p><img src="http://kayakuguri.github.io/images/2015/03/subdomain01.jpg" alt="route53" /></p>

<p>ã™ã§ã«è¨­å®šã—ã¦ã„ã‚‹<code>Resouces</code>ãŒã‚ã‚‹ã®ã§ã€ãã¡ã‚‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/subdomain02.jpg" alt="Resouces" /></p>

<p>è¨­å®šã—ã¦ã„ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/subdomain03.jpg" alt="Domain Name" /></p>

<p>æ–°ã—ãCNAMEãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹ã®ã§<code>Create Record Set</code>ã‚’ã‚¯ãƒªãƒƒã‚¯</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/subdomain04.jpg" alt="Create Record" /></p>

<p>å³å´ã«è¨­å®šç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€è¨­å®šã™ã‚‹ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã€Typeã¯CNAMEã€valueã«github.ioã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å…¥ã‚Œã‚‹ã€‚<br/>
è¨­å®šã§ããŸã‚‰ã€<code>Create</code>ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä½œæˆã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/subdomain05.jpg" alt="Create" /></p>

<p>ã“ã‚Œã§Route53ã®è¨­å®šã¯å®Œäº†</p>

<h2>Github pagesã®è¨­å®š</h2>

<p><strong>ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ä½œæˆã™ã‚‹æ–¹æ³•ã¯é–“é•ã„ã§ã—ãŸã€‚ä¸‹éƒ¨ã«æ­£ã—ã„æ–¹æ³•ã‚’è¨˜è¿°ã—ã¦ã„ã¾ã™</strong></p>

<p>githubãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚ŒãŸéš›ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã›ã‚‹è¨­å®šã¯ç°¡å˜ã§ã€<br/>
masterãƒªãƒã‚¸ãƒˆãƒªç›´ä¸‹ã«<code>CNAME</code>ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­ç½®ã™ã‚‹ã ã‘ã€‚<br/>
ã‚‚ã¡ã‚ã‚“gitã§è¿½åŠ ã—ã¦ã‚‚ã„ã„ã‘ã‚Œã©ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰GUIã§è¿½åŠ ã—ã¦ã¿ã‚‹ã€‚</p>

<p>è¨­å®šã—ãŸã„Githubãƒšãƒ¼ã‚¸ã®ãƒªãƒã‚¸ãƒˆãƒªã«è¡Œãã€masterãƒ–ãƒ©ãƒ³ãƒã‚’é¸æŠã—ã€+ãƒãƒ¼ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/subdomain06.jpg" alt="Create file" /></p>

<p>åå‰ã¯<strong>å¤§æ–‡å­—</strong>ã§<code>CNAME</code>ã€‚<br/>
å†…å®¹ã¯ã€è¨­å®šã—ãŸã„ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã€‚<code>http://</code>ã¯å¿…è¦ãªã—ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/subdomain07.jpg" alt="CNAME" /></p>

<p>æ­£ã—ãè¨­å®šã•ã‚ŒãŸã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã®<code>setting</code>ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/subdomain08.jpg" alt="setting" /></p>

<p><code>GitHub Pages</code>ã®æ¬„ã§è¨­å®šã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°OKã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/subdomain09.jpg" alt="github pages" /></p>

<p>DNSãŒæµ¸é€ã™ã‚‹ã¾ã§ã«å°‘ã—æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§æ°—é•·ã«å¾…ã¡ã¾ã—ã‚‡ã†ã€‚ã€‚<br/>
(åæ˜ ã•ã‚Œã‚‹ã¾ã§ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹å‡ºæ¥ãªããªã£ã¦ã—ã¾ã„ã¾ã™ãŒâ€¦)</p>

<h2>æ­£ã—ã„CNAMEãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œã‚Šæ–¹</h2>

<p>ã™ã¿ã¾ã›ã‚“ã€ä¸Šè¨˜ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰<code>CNAME</code>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã¯é–“é•ã„ã§ã—ãŸã€‚<br/>
ã¨ã„ã†ã®ã‚‚ã€<code>rake gen_deploy</code>ã—ãŸéš›ã«<code>source</code>ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰deployã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’<code>master</code>ãƒ–ãƒ©ãƒ³ãƒã«pushã—ã¦ã„ã‚‹ã‚ˆã†ã§ã€<br/>
ãã®éš›ã«ãƒ–ãƒ©ãƒ³ãƒå´ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã—ã¾ã†ã¨å·®ç•°ãŒå‡ºæ¥ã¦pushãŒå‡ºæ¥ãªããªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚</p>

<p>ãªã®ã§ã€ä»¥ä¸‹ã®æ–¹æ³•ã§å¼·åˆ¶çš„ã«pushã‚’è©¦ã¿ã‚‹ã¨ã€å½“ç„¶ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ä½œæˆã—ãŸCNAMEãŒæ¶ˆãˆã¦ã—ã¾ã„ã¾ã—ãŸã€‚<br/>
<a href="http://qiita.com/takuma7/items/2d6f6e786eb6c0afbefb">Octopressã§rake deployã—ãŸéš›ã«rejectedã•ã‚ŒãŸå ´åˆã®å¯¾å‡¦ &ndash; Qiita</a></p>

<p>ãªã®ã§ãƒ­ãƒ¼ã‚«ãƒ«ã§ä½œæˆã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ãã®å ´æ‰€ãŒã€<code>source/</code>ä»¥ä¸‹ã¨ãªã‚‹ã‚ˆã†ã§ã™ã€‚<br/>
<code>source/CNAME</code>ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€åŒã˜ã‚ˆã†ã«ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</p>

<p>ãã®çŠ¶æ…‹ã§<code>gen_deploy</code>ã—ã¦ã‚„ã‚Šãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ç¢ºèªã™ã‚‹ã¨è¦‹äº‹ã€masterãƒ–ãƒ©ãƒ³ãƒä¸Šã®ç›´ä¸‹ã«CNAMEãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚<br/>
ã“ã‚Œã§OKãªã¯ãš</p>

<h2>å‚è€ƒ</h2>

<p>å…¬å¼ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒè‹±èªã ã‘ã©ä¸€ç•ªã‚ã‹ã‚Šã‚„ã™ã„ã‹ã‚‚ã€‚<br/>
<a href="https://help.github.com/articles/adding-a-cname-file-to-your-repository/">Adding a CNAME file to your repository</a></p>

<p>ãã®ä»–<br/>
<a href="http://blog.hello-world.jp.net/git-2/2612/">GitHub Pagesã§ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ä½¿ã† | hello-world.jp.net</a><br/>
<a href="http://tech.tanaka733.net/entry/2013/09/15/%E3%81%8A%E5%90%8D%E5%89%8D.com_%E3%81%A7%E5%8F%96%E3%81%A3%E3%81%9F%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%92_Amazon_Route53%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%97%E3%80%81%E3%82%B5%E3%83%96%E3%83%89">ãŠåå‰.com ã§å–ã£ãŸãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ Amazon Route53ã§ç®¡ç†ã—ã€ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ã¯ã¦ãªãƒ–ãƒ­ã‚°ã«å‰²ã‚Šå½“ã¦ã‚‹ã¾ã§ &ndash; éŠ€ã®å…‰ã¨ç¢§ã„ç©º</a><br/>
<a href="http://blog.shiroyama.us/blog/2014/02/26/octopress/">ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãƒ–ãƒ­ã‚°ã¯ Octopress ãŒæœ€é© &ndash; $shiroyama->($blog);</a></p>

<p><a href="http://aws.amazon.com/jp/route53/">Amazon Route53</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ãƒ“ãƒ¥ãƒ¼ç”»é¢ã«å‡ºã‚‹ãƒãƒ£ã‚¿ãƒ¼ãƒ•ã‚©ãƒ­ãƒ¼ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/03/10/chatter-follow/"/>
    <updated>2015-03-10T16:13:23+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/03/10/chatter-follow</id>
    <content type="html"><![CDATA[<p>ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã‚„ãƒªãƒ¼ãƒ‰ãªã©ã®ãƒ“ãƒ¥ãƒ¼ç”»é¢ã‚’è¡¨ç¤ºã—ãŸæ™‚ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®åˆ—ã«è¡¨ç¤ºã•ã‚Œã‚‹ã€<br/>
ç·‘ã®ï¼‹ãƒœã‚¿ãƒ³ã¯ã€ã“ã®ãƒªãƒ¼ãƒ‰(ã‚„ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãªã©)ã‚’ãƒãƒ£ã‚¿ãƒ¼ã§ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ã€ã¨ã„ã†ãƒœã‚¿ãƒ³ãªã®ã§ã™ãŒã€<br/>
ç‰¹ã«ä½¿ç”¨ã—ãªã„ã®ã§éè¡¨ç¤ºã«ã™ã‚‹æ–¹æ³•ã‚’èª¿ã¹ã¾ã—ãŸã€‚</p>

<!-- more -->


<p>ã“ã®ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã—ãŸã„ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/chatter1.jpg" alt="ãƒãƒ£ã‚¿ãƒ¼ãƒ•ã‚©ãƒ­ãƒ¼ãƒœã‚¿ãƒ³" /></p>

<p>ã“ã‚Œã¯ã€ãƒ•ã‚£ãƒ¼ãƒ‰è¿½è·¡ã€ã¨ã„ã†æ©Ÿèƒ½ã§åˆ¶å¾¡ã§ãã¾ã™ã€‚<br/>
<code>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</code> &ndash;> <code>Chatter</code> &ndash;> <code>ãƒ•ã‚£ãƒ¼ãƒ‰è¿½è·¡</code> ã‚’é¸æŠã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/chatter2.jpg" alt="ãƒ•ã‚£ãƒ¼ãƒ‰è¿½è·¡" /></p>

<p>è¿½è·¡ã‚’ã‚„ã‚ãŸã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠã—ã¾ã™ã€‚<br/>
ä¸Šéƒ¨ã«ã‚ã‚‹ã€ã€Œãƒ•ã‚£ãƒ¼ãƒ‰è¿½è·¡ã®æœ‰åŠ¹åŒ–ã€ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã—ã¾ã™ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/chatter3.jpg" alt="" /></p>

<p>ä¿å­˜ã—ã¾ã™ã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/chatter4.jpg" alt="" /></p>

<p>ã“ã‚Œã§ãƒ“ãƒ¥ãƒ¼ç”»é¢ã‹ã‚‰ãƒœã‚¿ãƒ³ãŒéè¡¨ç¤ºã«ãªã‚Šã¾ã—ãŸã€‚</p>

<p><img src="http://kayakuguri.github.io/images/2015/03/chatter5.jpg" alt="" /></p>

<p>ã“ã®ãƒ•ã‚£ãƒ¼ãƒ‰è¿½è·¡æ©Ÿèƒ½ã¯ãƒ•ã‚©ãƒ­ãƒ¼ã—ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã«ã©ã†ã„ã†å¤‰æ›´ãŒã‚ã£ãŸæ™‚ã«é€šçŸ¥ã™ã‚‹ã‹ã€ã‚’è¨­å®šã§ãã‚‹ã®ã§ã€<br/>
ä¸Šæ‰‹ãä½¿ãˆã°ä¾¿åˆ©ã«ãªã‚‹ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[heroku]herokuã®PostgreSQLã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/03/04/heroku-postgres-version/"/>
    <updated>2015-03-04T17:38:54+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/03/04/heroku-postgres-version</id>
    <content type="html"><![CDATA[<p>herokuã®postgreSQLã‚’å…¥ã‚Œã‚‹éš›ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æŒ‡å®šãŒå‡ºæ¥ãŸã®ã§ãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<p><a href="https://devcenter.heroku.com/articles/heroku-postgresql#version-support-and-legacy-infrastructure">Version Support and Legacy Infrastructure &ndash; Heroku Postgres</a></p>

<p>é¸ã¹ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³é…ä¸‹ã€‚</p>

<ul>
<li>9.4(beta)</li>
<li>9.3(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)</li>
<li>9.2</li>
<li>9.1</li>
</ul>


<p>æŒ‡å®šã—ã¦å…¥ã‚Œã‚‹ãŸã‚ã«ã¯ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ã¯ãªãã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦å…¥ã‚Œã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>

<p>ã¾ãšã¯ãã®ã¾ã¾ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¥ã‚Œã¦ã¿ã‚‹ã€‚<br/>
ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹ã¨ã“ã‚ã‹ã‚‰</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ heroku create
</span><span class='line'>Creating fierce-woodland-3392... done, stack is cedar-14
</span><span class='line'>
</span><span class='line'>$ heroku addons:add heroku-postgresql --app fierce-woodland-3392
</span><span class='line'>Adding heroku-postgresql on fierce-woodland-3392... done, v4 (free)
</span><span class='line'>Attached as HEROKU_POSTGRESQL_CRIMSON_URL
</span><span class='line'>Database has been created and is available
</span><span class='line'> ! This database is empty. If upgrading, you can transfer
</span><span class='line'> ! data from another database with pgbackups:restore.
</span><span class='line'>Use `heroku addons:docs heroku-postgresql` to view documentation.
</span><span class='line'>
</span><span class='line'>$ heroku pg:info --app fierce-woodland-3392
</span><span class='line'>=== HEROKU_POSTGRESQL_CRIMSON_URL (DATABASE_URL)
</span><span class='line'>Plan:        Hobby-dev
</span><span class='line'>Status:      Available
</span><span class='line'>Connections: 0/20
</span><span class='line'>PG Version:  9.3.6
</span><span class='line'>Created:     2015-03-04 08:43 UTC
</span><span class='line'>Data Size:   6.4 MB
</span><span class='line'>Tables:      0
</span><span class='line'>Rows:        0/10000 (In compliance)
</span><span class='line'>Fork/Follow: Unsupported
</span><span class='line'>Rollback:    Unsupported</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã€postgresqlã®ç„¡æ–™ç‰ˆã‚’æŒ‡å®šãªã—ã§å…¥ã‚Œã¦ã€æƒ…å ±ã‚’ç¢ºèªã—ã¦ã„ã‚‹ã€‚<br/>
æƒ…å ±å†…ã«ã‚ã‚‹é€šã‚Šã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã€<code>9.3.6</code>ã€‚</p>

<p>æ¬¡ã«æŒ‡å®šã‚ã‚Šã§ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ heroku create
</span><span class='line'>Creating polar-dusk-1475... done, stack is cedar-14
</span><span class='line'>https://polar-dusk-1475.herokuapp.com/ | https://git.heroku.com/polar-dusk-1475.git
</span><span class='line'>
</span><span class='line'>$ heroku addons:add heroku-postgresql --version=9.1 --app polar-dusk-1475
</span><span class='line'>Adding heroku-postgresql on polar-dusk-1475... done, v4 (free)
</span><span class='line'>Attached as HEROKU_POSTGRESQL_PURPLE_URL
</span><span class='line'>Database has been created and is available
</span><span class='line'> ! This database is empty. If upgrading, you can transfer
</span><span class='line'> ! data from another database with pgbackups:restore.
</span><span class='line'>Use `heroku addons:docs heroku-postgresql` to view documentation.
</span><span class='line'>
</span><span class='line'>$ heroku pg:info --app polar-dusk-1475
</span><span class='line'>=== HEROKU_POSTGRESQL_PURPLE_URL (DATABASE_URL)
</span><span class='line'>Plan:        Hobby-dev
</span><span class='line'>Status:      Available
</span><span class='line'>Connections: 0/20
</span><span class='line'>PG Version:  9.1.11
</span><span class='line'>Created:     2015-03-04 08:45 UTC
</span><span class='line'>Data Size:   5.9 MB
</span><span class='line'>Tables:      0
</span><span class='line'>Rows:        0/10000 (In compliance)
</span><span class='line'>Fork/Follow: Unsupported
</span><span class='line'>Rollback:    Unsupported</span></code></pre></td></tr></table></div></figure>


<p>çµæœã¯è¦‹ã¦ã®é€šã‚Šã€‚<code>9.1.11</code>ã§å…¥ã£ã¦ã„ã‚‹ã€‚</p>

<p>å®Ÿéš›ã«æŒ‡å®šã—ã¦ã„ã‚‹ç®‡æ‰€ã¯ã€addonã®è¿½åŠ ã®å¾Œã‚ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã€<code>--version=9.1</code>ã‚’è¿½åŠ ã—ã¦ã‚„ã‚‹ã ã‘ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[heroku]herokuã§httpã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’httpsã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã›ã‚‹è¨­å®š]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/03/03/heroku-force-https/"/>
    <updated>2015-03-03T02:05:27+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/03/03/heroku-force-https</id>
    <content type="html"><![CDATA[<p>htaccessã‚’ä½¿ç”¨ã—ã¦ã€httpã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å…¨ã¦httpsã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã›ã‚‹è¨­å®šã‚’æ›¸ã„ãŸéš›ã«ã€<br/>
å°‘ã—æ‚©ã‚“ã ã®ã§ãƒ¡ãƒ¢ã€‚</p>

<!-- more -->


<h2>é€šå¸¸ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ</h2>

<p>ã‚°ã‚°ã‚‹ãªã©ã—ã¦èª¿ã¹ã‚‹ã¨ã¾ãšå‡ºã¦ãã‚‹ã®ãŒã“ã®æ–¹æ³•ã€‚<br/>
å®Ÿéš›ã€vagrantãªã‚“ã‹ã§ã®ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã ã¨ã“ã‚Œã§å•é¡Œãªããƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‡ºæ¥ãŸã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>RewriteEngine On
</span><span class='line'>RewriteCond %{SERVER_PORT} !^443$
</span><span class='line'>RewriteRule ^.*$ https://%{SERVER_NAME}%{REQUEST_URI} [L,R]</span></code></pre></td></tr></table></div></figure>


<p>ã‚‚ã—ãã¯ã“ã‚Œã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>RewriteEngine on
</span><span class='line'>RewriteCond %{HTTPS} off
</span><span class='line'>RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R,L]</span></code></pre></td></tr></table></div></figure>


<p><strong>å‚è€ƒã‚µã‚¤ãƒˆ</strong><br/>
<a href="http://takuya-1st.hatenablog.jp/entry/20101217/1292579757">HTTPSã‚’å¼·åˆ¶ã™ã‚‹ç°¡å˜ãªè¨­å®š(htaccess)</a><br/>
<a href="http://sachips.byeto.jp/server/htaccess_http_ssl.html">.htaccessãƒ•ã‚¡ã‚¤ãƒ«ã§HTTPã‚¢ã‚¯ã‚»ã‚¹ã‚’SSLã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹æ–¹æ³•ã¨ãã®é€†ã‚‚</a></p>

<p>ã—ã‹ã—ã€å…¨ãåŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’herokuã«ã‚¢ãƒƒãƒ—ã™ã‚‹ã¨ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ«ãƒ¼ãƒ—ãŒç™ºç”Ÿã—ã€å‹•ã‹ãªããªã£ã¦ã—ã¾ã£ãŸã€‚</p>

<h2>heroku(aws)ç’°å¢ƒã§ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ</h2>

<p>herokuã¯awsä¸Šã§å‹•ã„ã¦ã„ã¾ã™ã€‚<br/>
ã§ã€awsãªã©ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹è² è·åˆ†æ•£ãŸã‚ã®å‡¦ç†ã€ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã¨ï¼Ÿä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼ã¯èµ·ã“ã£ã¦ã—ã¾ã†ã‚ˆã†ã§ã™ã€‚</p>

<p><strong>å‚è€ƒãƒšãƒ¼ã‚¸</strong><br/>
<a href="http://qiita.com/tkosuga@github/items/ee51fcd6c047b19856be">apache(htaccess)ã§ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ãƒ¼çµŒç”±ã®HTTP/HTTPSè»¢é€</a><br/>
<a href="http://qa.atmarkit.co.jp/q/3221">ä¸€éƒ¨ã®ãƒšãƒ¼ã‚¸ã§ã®SSLã®è¨­å®šã«å›°ã£ã¦ã„ã¾ã™</a><br/>
<a href="http://d.hatena.ne.jp/komiyak/20130807/1375845025">AWS Elastic Load Balancer ã¨ Apache ã‚’ä½¿ã£ã¦ HTTPS(SSL) é€šä¿¡ã‚’è¡Œã†ãŸã‚ã®è¨­å®šæ–¹æ³•</a></p>

<p>ã“ã‚Œã‚’å›é¿ã™ã‚‹ã«ã¯ã€ä¸Šè¨˜å‚è€ƒã‚µã‚¤ãƒˆã«ã‚‚ã‚ã‚‹ã‚ˆã†ã«ã€<code>HTTP:X-Forwarded-Proto</code>ã‚’è¦‹ã¦è»¢é€ã‚’ã‹ã‘ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã—ã¦ã‚„ã‚‹ã“ã¨ã§ãƒ«ãƒ¼ãƒ—ã—ãªã„ã‚ˆã†ã«å‡ºæ¥ã‚‹ã¿ãŸã„ã€‚</p>

<p>å®Ÿéš›ã«è¨­å®šã—ãŸå†…å®¹ã¯ä»¥ä¸‹ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>RewriteEngine on
</span><span class='line'>RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
</span><span class='line'>RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R,L]</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã§ç„¡äº‹ã€å‹•ä½œã—ã¾ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[heroku]SSLè¨¼æ˜æ›¸ã‚’æ›´æ–°ã™ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/02/20/certs-update/"/>
    <updated>2015-02-20T17:58:29+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/02/20/certs-update</id>
    <content type="html"><![CDATA[<p>ã™ã§ã«herokuä¸Šã§sslã‚’å°å…¥ã—ã¦ã„ã¦ã€<br/>
ãã®è¨¼æ˜æ›¸ã‚’æ›´æ–°ã™ã‚‹ã€ã¨ã„ã†å‰æã§ã™ã€‚</p>

<!-- more -->


<h2>æº–å‚™</h2>

<p>ãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™ã¯å°å…¥ã®æ™‚ã¨åŒã˜ã§ã™ã€‚<br/>
ä»¥å‰ã«æ›¸ã„ãŸã‚‚ã®ã‚’å‚è€ƒã«ã©ã†ãã€‚</p>

<p><a href="http://kayakuguri.github.io/blog/2014/09/30/heroku-ssl-subdomain/">[heroku]herokuã§ã®SSLè¨­å®šã¨ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã®é©ç”¨æ–¹æ³•</a></p>

<p>æº–å‚™ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ä»¥ä¸‹ã®2ã¤ã§ã™ã€‚</p>

<ul>
<li>server.crt</li>
<li>server.key</li>
</ul>


<h2>æ›´æ–°</h2>

<p>ä»¥ä¸‹ã§æ›´æ–°ãŒå‡ºæ¥ã¾ã™ã€‚</p>

<pre><code>$ heroku certs:update server.crt server.key
</code></pre>

<p>SSLå°å…¥æ™‚ç‚¹ã§å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹CNAMEç”¨ã®ã‚³ãƒ¢ãƒ³ãƒãƒ¼ãƒ ãŒå¤‰ã‚ã£ã¦ã—ã¾ã†ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã„ã¾ã—ãŸãŒå¤§ä¸ˆå¤«ã§ã—ãŸã€‚<br/>
ä»¥ä¸‹ã€ãƒ­ã‚°ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Resolving trust chain... done
</span><span class='line'>
</span><span class='line'> !    WARNING: Potentially Destructive Action
</span><span class='line'> !    This command will change the certificate of endpoint xxx-9999.herokussl.herokussl.com on app-name.
</span><span class='line'> !    To proceed, type "app-name" or re-run this command with --confirm app-name
</span><span class='line'>
</span><span class='line'>&gt; app-name
</span><span class='line'>Updating SSL Endpoint xxx-9999.herokussl.com for app-name... done
</span><span class='line'>Updated certificate details:
</span><span class='line'>Common Name(s): example.com
</span><span class='line'>Expires At:     (æœŸé™)
</span><span class='line'>Issuer:         (SSLå†…å®¹)
</span><span class='line'>Starts At:      (é–‹å§‹æ—¥)
</span><span class='line'>Subject:        (SSLå†…å®¹)
</span><span class='line'>SSL certificate is verified by a root authority.</span></code></pre></td></tr></table></div></figure>


<p>é€”ä¸­ã§é‡è¦ãªå¤‰æ›´ã£ã¦ã“ã¨ã§ã€ç¢ºèªãŒå…¥ã‚‹ã®ã§ã€ã‚¢ãƒ—ãƒªåã‚’ã‚¿ã‚¤ãƒ—ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚<br/>
äºˆã‚ã€<code>--confirm app-name</code>ã‚’ã¤ã‘ã‚‹ã¨ã‚¹ãƒ«ãƒ¼å‡ºæ¥ã‚‹ã‚ˆã†ã§ã™ã€‚</p>

<p>ã¾ãŸã€ã‚‚ã—é–“é•ãˆã¦ã‚¢ãƒƒãƒ—ã—ã¦ã—ã¾ã£ãŸã€ãªã©ã®å ´åˆã¯ã€ã‚‚ã¨ã«æˆ»ã™ã‚³ãƒãƒ³ãƒ‰ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚</p>

<pre><code>$ heroku certs:rollback
</code></pre>

<h2>å‚è€ƒ</h2>

<p><a href="https://devcenter.heroku.com/articles/ssl-endpoint#update-certificate">https://devcenter.heroku.com/articles/ssl-endpoint#update-certificate</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[heroku]Heroku Postgresã®DBã‚’Heroku Postgresã®DBã‹ã‚‰ãƒªã‚¹ãƒˆã‚¢ã™ã‚‹]]></title>
    <link href="http://kayakuguri.github.io/blog/2015/02/20/restore-postgresql/"/>
    <updated>2015-02-20T16:59:38+09:00</updated>
    <id>http://kayakuguri.github.io/blog/2015/02/20/restore-postgresql</id>
    <content type="html"><![CDATA[<p>ã‚¿ã‚¤ãƒˆãƒ«ã®é€šã‚Šã€‚<br/>
åˆ¥ã®heroku postgresä¸Šã«ã‚ã‚‹DBã®å†…å®¹ã‚’ã€ãã®ã¾ã¾åˆ¥ã®heroku postgresã«åæ˜ ã™ã‚‹æ–¹æ³•ã€‚</p>

<!-- more -->


<h2>ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</h2>

<p>ä»¥å‰ã«ã‚‚æ›¸ãã¾ã—ãŸãŒã€ã¨ã‚Šã‚ãˆãšç¾çŠ¶ã®ã‚‚ã®ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€‚</p>

<pre><code>$ heroku pgbackups:capture --app å…ƒã‚¢ãƒ—ãƒªå
</code></pre>

<p>URLã¯ä»¥ä¸‹ã§ç¢ºèªã€‚</p>

<pre><code>$ heroku pgbackups:url --app å…ƒã‚¢ãƒ—ãƒªå
</code></pre>

<p>è¡¨ç¤ºã•ã‚Œã‚‹amazonã®URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãŠã</p>

<h2>ãƒªã‚¹ãƒˆã‚¢</h2>

<p>ãƒªã‚¹ãƒˆã‚¢ã—ãŸã„ã‚¢ãƒ—ãƒªã«heroku postgresã‚’å…¥ã‚Œã¦ãŠãã€‚<br/>
ç’°å¢ƒå¤‰æ•°ã®<code>DATABASE_URL</code>ã«å…¥ã£ã¦ã„ã‚‹DBã¸ã®ãƒªã‚¹ãƒˆã‚¢ãŒè¡Œã‚ã‚Œã‚‹ã€‚<br/>
(ã‚¢ãƒ‰ã‚ªãƒ³ã‚’å…¥ã‚Œã‚‹ã¨è‡ªå‹•ã§å…¥ã£ã¦ã„ã‚‹ã¯ãš)</p>

<p>ä¸Šè¨˜ã§ã‚³ãƒ”ãƒ¼ã—ãŸURLã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã€‚</p>

<pre><code>$ heroku pgbackups:restore DATABASE 'amazonã®URL' --app æ–°ã‚¢ãƒ—ãƒªå
</code></pre>

<p>å®Œäº†ã€‚</p>

<h2>å‚è€ƒ</h2>

<p><a href="https://devcenter.heroku.com/articles/heroku-postgres-import-export">https://devcenter.heroku.com/articles/heroku-postgres-import-export</a></p>
]]></content>
  </entry>
  
</feed>
